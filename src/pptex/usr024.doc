% usr024.doc   %Z% $Date$ $Revision$ $RCSfile$

=TEX
% usr024.doc   %Z% $Date$ $Revision$ $RCSfile$
\documentstyle[hol1,11pt,TQ]{article}

\TPPtitle{Standard \LaTeX Document Style for \Product\ User Documentation}
%\def\TPPheadtitle{}
\TPPref{DS/FMU/IED/USR024}
\def\SCCSissue{$Revision$%
}

=IGNORE
Commands to process this document:

docsml usr024.doc ; mv usr024.sml USR.sty
docsml usr024.doc ; sed -e 's/[ 	]%.*$//' -e 's/^[ 	][ 	]*//' -e 's/[ 	][ 	]*$//' usr024.sml >! USR.sty
doctex usr024 ; texdvi usr024
texdvi usr024
bibtex usr024
dvipage usr024 &

=TEX
\makeindex
\TPPissue{\SCCSissue}
\TPPproject{FST PROJECT}
\TPPdate{\FormatDate{$Date$%
}}
\TPPstatus{Draft}
\TPPtype{Literate Script}
\TPPkeywords{HOL}
\TPPauthor{R.B.Jones & WIN01}
\TPPauthorisation{R.B.~Jones & FMU Manager}
\TPPabstract{This document contains the \LaTeX{} document style
	{\tt USR.sty} which is used for typesetting user documentation for \Product.}
\TPPdistribution{\parbox[t]{4.0in}{%
	Library
}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ftlinepenalty 1000
\newcommand{\cs}[1]{{\tt \string#1}}
\catcode`\_=\active

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{DOCUMENT CONTROL}

\subsection{Contents List}
\tableofcontents
% \listoftables

\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}

\begin{description}
\item[Issue 1.1]
	Initially set up by adaptation of TQa4.sty and TQ.sty

\end{description}

\subsection{Changes Forecast}

None.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%********************************************************************
%--------------------------------------------------------------------

\newpage
\section{GENERAL}
\subsection{Scope}

This document contains the \LaTeX{} style file {\tt USR.sty} for use in user documentation for the ProofPower system.

%********************************************************************

\subsection{Introduction}

%\subsubsection{Purpose and Background}
%\subsubsection{Dependencies}

%--------------------------------------------------------------------

\subsubsection{Interface}

The interface to the style file is by quoting its name as an option in
the document style command near the start of each document.
It is intended for use with hol1.sty, but not with TQ.sty.

The simplest way to produce the style file is to run the following
shell commands:

=GFTSHOW
	docsml usr024.doc
	mv usr024.sml USR.sty
=TEX

The style file may be compacted by the following shell commands which
remove most \LaTeX{} comments plus all leading and trailing spaces and
tabs on each line.  (Note, each pair of square braces contain one space
and one tab character.)

=GFTSHOW
	docsml usr024.doc
	sed -e 's/[ 	]%.*$//' -e 's/^[ 	][ 	]*//' -e 's/[ 	][ 	]*$//' \
		usr024.sml >! USR.sty
=TEX

%\subsubsection{Algorithms}
%\subsubsection{Possible Enhancements}
%\subsubsection{Deficiencies}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{IDENTIFICATION}

Whenever the macro package is loaded it will identify itself on the
terminal and in the log file.  Note the positioning of the percent and
newline characters to avoid unnecessary spaces in the message and the
loss of significant text when the style file is being used when (in
SCCS terminology) it is `out for editing'.

=SMLPLAIN LaTeX
% User documentation style file USR.sty.  %Z% $Date$ $Revision$ $RCSfile$
\typeout{Issue $Revision$
dated $Date$.%
}
=TEX
\section{PAGE SIZE AND LAYOUT}
To get vertical space between paragraphs, and no hanging indents.

=SMLPLAIN LaTeX
\advance\parskip by 0.5\baselineskip
\parindent 0pt

=TEX
From Article.sty, page size information.
Original sizes from Article.sty are shown after the current values

=SMLPLAIN LaTeX
\if@twoside
    \oddsidemargin 17pt   % was 44pt
    \evensidemargin 36pt  % was 82pt
    \marginparwidth 0pt   % was 107pt
\else
    \oddsidemargin 26pt   % was 63pt
    \evensidemargin 26pt  % was 63pt
    \marginparwidth 0pt   % was 90pt
\fi

\columnsep 10pt
\columnseprule 0pt
\hoffset -0.2in
\marginparpush 5pt
\marginparsep 0pt
\textheight = 9.7in
\textwidth 6.6in
\topmargin 0pt
\topsep 0pt
\voffset -0.6in

=IGN
\hsize=159.2truemm
\ifAfour \vsize=246.2truemm \else \vsize=228.6truemm \fi

=TEX
The default is to use a large amount of the page, but this is not compatible with programs like `dvisun' which expect `\hoffset=0pt' and `\voffset=0pt'.
To allow viewing the file complete with its headers and LHS margin use the macro `\TPPsmallpage'. 
Note that page boundaries will change if this macro is used, because of the changes to `\textheight' and `\textwidth'.

=SMLPLAIN LaTeX
\def\USRsmallpage{%
\textheight = 8.5in
\textwidth 6in
\advance\hoffset by 0.3in
\advance\voffset by 0.6in
}

=TEX
\section{MATH INDENTATION}

=SMLPLAIN LaTeX
\setlength{\mathindent}{\tabcolsep}
\addtolength{\mathindent}{\the\fontdimen2\elvtt}
\addtolength{\mathindent}{\the\fontdimen2\elvtt}
\addtolength{\mathindent}{\the\fontdimen2\elvtt}

\headheight 16pt
\headsep 20pt 
\footheight 12pt
\footskip 13mm

% ---------------------------------------------------------------------
% FOOTNOTES: footnotes are in 10 point font.
%
% put 12+1-1 points between text and rule
% put 10pt between at start of footnote
% foot note rule is 40mm long
% ---------------------------------------------------------------------

\skip\footins 12pt plus 2pt minus 2pt
\footnotesep 10pt
\def\footnoterule{\kern-3\p@ \hrule width 40mm \kern 2.6\p@}

% ---------------------------------------------------------------------
% FLOATS
% ---------------------------------------------------------------------

\floatsep 12pt plus 2pt minus 2pt
\textfloatsep  20pt plus 2pt minus 4pt
\intextsep 12pt plus 2pt minus 2pt
\@maxsep 20pt

% ---------------------------------------------------------------------
% Make "@" a "letter" for definitions that follow
% ---------------------------------------------------------------------

\makeatletter   

% ---------------------------------------------------------------------
% CHAPTER HEADINGS (deriving from Larry Paulson)
% ---------------------------------------------------------------------

\def\@rulehead#1{\hrule height1pt \vskip 14pt \huge \bf 
   #1 \vskip 14pt\hrule height1pt}

\def\@makechapterhead#1{ { \parindent 0pt 
\ifnum \c@secnumdepth >\m@ne \raggedright\large\bf \@chapapp{} \thechapter\par
 \vskip 8pt \fi \raggedright \@rulehead{#1} \par 
 \nobreak \vskip 50pt } }

\def\@makeschapterhead#1{ { \parindent 0pt {\large\bf\phantom{Chapter}} \par
   \vskip 8pt \raggedright 
 \@rulehead{#1} \par \nobreak \vskip 50pt } }

% ---------------------------------------------------------------------
% PAGE FOOT, on pages that start a new chapter
% ---------------------------------------------------------------------

\def\ps@plain{\let\@mkboth\@gobbletwo
     \def\@oddhead{}\def\@oddfoot{\rm\bf\hfil\thepage
     \hfil}\def\@evenhead{}\let\@evenfoot\@oddfoot}

% ---------------------------------------------------------------------
% PAGE HEADINGS
% ---------------------------------------------------------------------

\def\ps@headings{
	\def\@oddfoot{\bf \copyright\ : ICL 1991, 1992 \hfill \Product\ 0.2 - Reference Manual \hfill USR006}
	\def\@evenfoot{\@oddfoot}
	\def\@evenhead{\vbox{\hbox to \textwidth{\bf\thepage\hfil\bf\leftmark
	}\vskip-\prevdepth\vskip 4.5pt\hrule height0.9pt}}\def
  \@oddhead{\vbox{\hbox to \textwidth{\bf\rightmark\hfil\bf
	\thepage}\vskip-\prevdepth\vskip 4.5pt\hrule height0.9pt}}\def
  \chaptermark##1{\markboth {{\ifnum \c@secnumdepth
>\m@ne
\@chapapp\ \thechapter. \ \fi ##1}}{}}\def\sectionmark##1{\markright
{{\ifnum \c@secnumdepth >\z@
\thesection. \ \fi ##1}}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Table of contents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\tableofcontents{\parskip=0pt\chapter*{Contents\@mkboth{Contents}{Contents}}
 \@starttoc{toc}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Part
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\part{\cleardoublepage \thispagestyle{empty} \if@twocolumn \onecolumn
\@tempswatrue \else \@tempswafalse \fi \hbox{}\vfil \bgroup \centering
\secdef\@part\@spart} 

\def\@endpart{\par\egroup \vfil\newpage \if@twoside \hbox{}
\thispagestyle{empty} 
 \newpage 
 \fi \if@tempswa \twocolumn \fi} 

% ---------------------------------------------------------------------
% REFERENCES
%
% (1) For references in each volume use:
%
%        \begin{thebibliography} ... \end{thebibliography}
%
%     This makes the references a new chapter.
%
% (2) For case study references, also use:
%
%        \begin{thebibliography} ... \end{thebibliography}
%
%     This makes the references in a case study an unumbered section.
%
% NOTE: references in case studies should have different names than
%       those in the body of the tutorial.  (I.e. different \bibitem name).
% ---------------------------------------------------------------------

\def\thebibliography#1{\chapter*{References\@mkboth
 {References}{References}} \addcontentsline{toc}{chapter}{References}
 \list {[\arabic{enumi}]}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
 \advance\leftmargin\labelsep
 \usecounter{enumi}}
 \def\newblock{\hskip .11em plus .33em minus -.07em}
 \sloppy
 \sfcode`\.=1000\relax}
\let\endthebibliography=\endlist

\ps@headings  %to override previous

% ---------------------------------------------------------------------
% To make the index
% ---------------------------------------------------------------------
\def\theindex{\@restonecoltrue\if@twocolumn\@restonecolfalse\fi
\columnseprule \z@
\columnsep 35pt\twocolumn[\@makeschapterhead{Index}]
 \@mkboth{Index}{Index}\thispagestyle{plain}
 \addcontentsline{toc}{chapter}{Index}
 \parindent\z@
 \parskip\z@ plus .3pt\relax\let\item\@idxitem}
\def\@idxitem{\par\hangindent 40pt}
\def\subitem{\par\hangindent 40pt \hspace*{20pt}}
\def\subsubitem{\par\hangindent 40pt \hspace*{30pt}}
\def\endtheindex{\if@restonecol\onecolumn\else\clearpage\fi}

% ---------------------------------------------------------------------
% Other Indexing commands
%
% autoindex is defined for indexing the thing in \DOC{thing}. 
% It translates \_ in thing to \string \_.
% ---------------------------------------------------------------------

\def\makeindex{\if@filesw \newwrite\@indexfile
  \immediate\openout\@indexfile=\jobname.idx
  \def\index{\@bsphack\begingroup
             \def\protect####1{\string####1\space}\@sanitize
             \@wrindex\@indexfile}
  \def\autoindex{\@bsphack\begingroup
             \def\protect####1{\string####1\space}
             \def\_{\string\_}\@sanitize
             \@wrindex\@indexfile}\typeout
  {Writing index file \jobname.idx }\fi}

\def\@wrindex#1#2{\let\thepage\relax
   \xdef\@gtempa{\write#1{\string
      \indexentry{#2}{\thepage}}}\endgroup\@gtempa
   \if@nobreak \ifvmode\nobreak\fi\fi\@esphack}

\def\index{\@bsphack\begingroup \@sanitize\@index}
\def\autoindex{\@bsphack\begingroup \@sanitize\@index}

\def\@index#1{\endgroup\@esphack}

=IGN
% ---------------------------------------------------------------------
% Enumeration with Roman numerals: one-level enumeration only
% ---------------------------------------------------------------------

\newcount\@myenumdepth \@myenumdepth = 0
\@definecounter{myenumi}

%\newenvironment{myenumerate}{\begin{enumerate}}{\end{enumerate}}
%  \renewcommand{\theenumi}{\roman{enumi}}
%  \renewcommand{\labelenumi}{(\roman{enumi})}}{\end{enumerate}}

\def\myenumerate{\ifnum \@myenumdepth >0 \@toodeep\else
      \advance\@myenumdepth \@ne 
       \list{(\roman{myenumi})}{\usecounter{myenumi}
            \settowidth{\labelwidth}{(iii)}
            \setlength{\leftmargin}{\labelwidth}
            \addtolength{\leftmargin}{\labelsep}
            \addtolength{\leftmargin}{\mathindent}
            \def\makelabel##1{\hss\llap{##1}}}\fi}

\let\endmyenumerate =\endlist


=SMLPLAIN LaTeX

% ---------------------------------------------------------------------
% Enumerate envoronment for proofs in drules.tex
% ---------------------------------------------------------------------

\def\proof{\ifnum \@enumdepth >0 \@toodeep\else
      \advance\@enumdepth \@ne 
      \edef\@enumctr{enum\romannumeral\the\@enumdepth}\list
      {\csname label\@enumctr\endcsname}{\usecounter
        {\@enumctr}\setlength{\itemsep}{0.0mm}
        \setlength{\baselineskip}{13pt}
        \def\makelabel##1{\hss\llap{##1}}}\fi}

\let\endproof =\endlist

% ---------------------------------------------------------------------
% Make "@" an "other" again
% ---------------------------------------------------------------------
\makeatother



% ---------------------------------------------------------------------
% Preliminary settings etc.
% ---------------------------------------------------------------------

\renewcommand{\topfraction}{0.9}	  % 0.9 of the top page can be fig.
\renewcommand{\bottomfraction}{0.9}	  % 0.9 of the bottom page can be fig.
\renewcommand{\textfraction}{0}	  % 0 of the page must contain text
\setcounter{totalnumber}{4}	 	  % max of 4 figures per page
\setcounter{secnumdepth}{3}		  % number sections down to level 3
\setcounter{tocdepth}{2}		  % toc contains numbers to level 2
\flushbottom				  % text extends right to the bottom
=IGNORE

\newpage

\makeatletter
\def\refstepcounter#1{\stepcounter{#1}\global\edef\@currentlabel{\csname
	p@#1\endcsname\csname the#1\endcsname}}
\makeatother

\twocolumn[\section{INDEX}] \label{Index}

\footnotesize
\printindex

\onecolumn

=TEX

\end{document}
