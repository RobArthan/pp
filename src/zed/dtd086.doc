%  dtd086.doc  %Z% $Date$ $Revision$ $RCSfile$
=TEX
% TQtemplate.tex
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{FST PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Detailed Design of the Z Library Numbers and Finiteness}  %% Mandatory field
\TPPref{DS/FMU/IED/DTD086}  %% Mandatory field
\def\SCCSversion{$Revision$%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}
%\TPPstatus{Approved}
\TPPstatus{Draft}
\TPPtype{Specification}
\TPPkeywords{HOL}
\TPPauthor{D.J.~King & WIN01}  %% Mandatory field
%\TPPauthors{Name 1&location 1\\Name 2&location 2\\Name 3&location 3}
\TPPauthorisation{R.D.~Arthan & FST Team Leader}
\TPPabstract{This document contains the detailed design of
the Z Library Numbers and Finiteness and their proof support.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
      Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}

\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}  % to get section number `0.3'
\begin{description}
\item [Issue 1.1 (22nd October 1992)]
First version, derived from 078 and 083.
\item [Issue 1.2 (30th October 1992)]
Indexing of $\_ ç \_ ê$ changed so that it works!
\end{description}
\subsection{Changes Forecast}
None.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains the detailed design
of the mathematical toolkit for HOL/Z.
The high level design for this material is given in \cite{DS/FMU/IED/HLD017}.
\subsection{Introduction}

\subsection{Purpose and Background}
See \cite{DS/FMU/IED/HLD017}.
\subsection{Dependencies}

\subsection{Possible Enhancements}
None.
\subsection{Deficiencies}
None known.
\section{PROLOG}

=SML
open_theory"z_functions";
push_pc "z_predicates";
delete_theory"z_numbers" handle Fail _ => ();
val icl'was_tco_flag = get_flag "z_type_check_only";
val icl'was_ax_flag = get_flag "z_use_axioms";
set_flag ("z_type_check_only", false);
set_flag ("z_use_axioms", true);
new_theory"z_numbers";
=TEX
\section {DEFINITION OF FIXITY}

The following fixity information has been taken from \cite{Spivey89}.
¹Z
fun 2 _ .. _
°

¹Z
fun 3 _ + _, _ - _
°

¹Z
fun 4 _ * _, _ div _, _ mod _
°
The following is a guess:
¹Z
fun 7 _ ç _ ê
°

¹Z
rel _ < _, _ ¼ _, _ ¾ _, _ > _
°
¹Z
gen 5 _ Ÿ _, _  _
°

¹Z
gen 7 æ _, æ‰1 _
°

\section{NUMBERS AND FINITENESS}

\subsection{Natural Numbers, Integers and Basic Operators}

The integers are defined as a set of all things of the HOL type $ú$.

This is equivalent to $[ú]$ but without making a call to the function $new\_type$.

¹Z
ú ¦ ¬{x:ú | T}®
°

¹ZAX
Ü Ûîİ : ğ ú;
Ü _ Û+İ _, _ Û-İ _, _ Û*İ _ : ú ¸ ú ­ ú;
Ü _ Ûdivİ _, _ Ûmodİ _ : ú ¸ (ú \ {0}) ­ ú;
Ü Û~İ : ú ­ ú
÷üüüüüüüüüüüüüüüüüü
Ü true
°

¹ZAX
Ü _ Û<İ _, _ Û¼İ _, _ Û¾İ _, _ Û>İ _ : ú ª ú
÷üüüüüüüüüüüüüüüüüü
Ü true
°

\subsection{Strictly Positive Integers and the Successor Function}

¹Z
Ûî‰1İ ¦ î \ {0}
°

¹ZAX
Ü Ûsuccİ : î ­ î
÷üüüüüüüüüüüüüüüüüü
Ü µ n : î · succ (n) = n + 1
°

\subsection{Iteration}

[X]œœœœœœœœœœœœœœœœ
Ü Ûiterİ : ú ­ (X ª X) ­ (X ª X)
÷üüüüüüüüüüüüüüüüüü
Ü µ R : X ª X · 
Ü	iter 0 R = id X ±
Ü	(µ k : î · iter (k + 1) R = R » (iter k R)) ±
Ü	(µ k : î · iter (~ k) R = iter k (R ç~ê))
ˆüüüüüüüüüüüüüüüüüüüü

[X]œœœœœœœœœœœœœœœœ
Ü_ ç _ ê : (X ª X) ¸ ú ­ (X ª X)
÷üüüüüüüüüüüüüüüüüü
Ü µ R : X ª X; k : î · 
Ü	R ç k ê = iter k R
ˆüüüüüüüüüüüüüüüüüüüü

We need to put an index entry for Û\_ç\_êİ in the text here, since indexing on the defining occurrence doesn't work.

\subsection{Number Range}

¹ZAX
Ü _ Û..İ _ : ú ¸ ú ­ ğ ú
÷üüüüüüüüüüüüüüüüüü
Ü µ a, b : ú ·
Ü	a .. b = {k : ú | a ¼ k ± k ¼ b}
°

\subsection{Finite Sets}


¹Z
æ X ¦ {S : ğ X | (¶ n:  î · ¶ f :1 .. n ­ S · ran f = S)}
°

¹Z
Ûæ‰1İ X ¦ (æ X) \ { š }
°

[X]œœœœœœœœœœœœœœœœ
Ü Û#İ : æ X ­ î
÷üüüüüüüüüüüüüüüüüü
Ü µ S : æ X ·
Ü	# S = (Í n : î | (¶ f : 1 .. n à S · ran f = S) · n)
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Finite Partial Functions}

¹Z
X ÛŸİ Y ¦ {f : X ß Y | dom f  æ X}
°

¹Z
X Ûİ Y ¦ (X Ÿ Y) ¡ (X ş Y)
°

\subsection{Minimum and Maximum of a Set of Numbers}

¹ZAX
Ü Ûminİ : ğ‰1 ú ß ú
÷üüüüüüüüüüüüüüüüüü
Ü min = {S : ğ‰1 ú; m : ú | m  S ± (µ n : S · m ¼ n) · S í m}
° 

¹ZAX
Ü Ûmaxİ : ğ‰1 ú ß ú
÷üüüüüüüüüüüüüüüüüü
Ü max = {S : ğ‰1 ú; m : ú | m  S ± (µ n : S · m ¾ n) · S í m}
°
\section{START OF STRUCTURE}
=DOC
signature ÛZNumbersİ = sig
=DESCRIBE
This provides the basic proof support for the Z library relations.
It creates the theory $z\_numbers$.
=ENDDOC
=THDOC
req_name Û"z_numbers"İ (Value "z_functions");
req_language "Z";
set_flag("tc_thms_only",true);
=DESCRIBE
The theory $z\_relations$ contains various definitions of relation operators, and ``defining theorems'' of Z library constants derived from these definitions.
It is created in structure $ZNumbers$.
=ENDDOC

\subsection{Definitions}
=DOC
val Ûz'ú_defİ : THM;	val Ûz'î_defİ : THM;
val Ûz'arith_defİ : THM;	val Ûz'inequality_defİ : THM;
val Ûz'î‰1_defİ : THM;	val Ûz'succ_defİ : THM;
val Ûz'iter_defİ : THM;	val Ûz'dots_defİ : THM;
val Ûz'æ_defİ : THM;	val Ûz'æ‰1_defİ : THM;
val Ûz'hash_defİ : THM;	val Ûz'Ÿ_defİ : THM;
val Ûz'_defİ : THM;	val Ûz'min_defİ : THM;
val Ûz'max_defİ : THM;	
=DESCRIBE
These are the definitions of the theory $z\_functions$.
=ENDDOC

\section{EPILOGUE}
=SML
end (* of signature ZNumbers *);
=SML
set_flag ("z_type_check_only", icl'was_tco_flag);
set_flag ("z_use_axioms", icl'was_ax_flag);
=TEX

\section{TEST POLICY}
The module tests for this module are to follow the guidelines
laid down in the quality plan~\cite{DS/FMU/IED/PLN008}.

\twocolumn[\section{INDEX}]
\small
\printindex

\end{document}


=IGN
delete_const ¬$"z'_ À _"®;

 [X]œœœœœœœœœœœœœœœœ
 Ü _ ÛÀİ _ : ğ X ¸ ğ X ­ ğ X
 ÷üüüüüüüüüüüüüüüüüü
 Üµ x  : ğ X · x À x = X
 ˆüüüüüüüüüüüüüüüüüüüü

dest_Zapp ñ x À x ®;
dest_app ñ x À x ®;

