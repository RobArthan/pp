%  dtd078.doc  %Z% $Date$ $Revision$ $RCSfile$
=TEX
% TQtemplate.tex
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{FST PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Detailed Design of the Z Library Sequences}  %% Mandatory field
\TPPref{DS/FMU/IED/DTD078}  %% Mandatory field
\def\SCCSversion{$Revision$%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}
%\TPPstatus{Approved}
\TPPstatus{Draft}
\TPPtype{Specification}
\TPPkeywords{HOL}
%\TPPauthor{D.J.~King & WIN01}  %% Mandatory field
%\TPPauthors{Name 1&location 1\\Name 2&location 2\\Name 3&location 3}
\TPPauthors{D.J.~King & WIN01\\K.~Blackburn & WIN01}
\TPPauthorisation{R.D.~Arthan & FST Team Leader}
\TPPabstract{This document contains the detailed design of
the Z Library Sequences and their proof support.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
      Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}

\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}  % to get section number `0.3'
\begin{description}
\item [Issue 1.1 (22nd October 1992)]
First version, derived from 078 and 083.
\end{description}
\subsection{Changes Forecast}
None.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains the detailed design
of the mathematical toolkit for HOL/Z.
The high level design for this material is given in \cite{DS/FMU/IED/HLD017}.
\subsection{Introduction}

\subsection{Purpose and Background}
See \cite{DS/FMU/IED/HLD017}.
\subsection{Dependencies}

\subsection{Possible Enhancements}
None.
\subsection{Deficiencies}
None known.
\section{PROLOG}

=SML
open_theory"z_numbers";
push_pc "z_predicates";
delete_theory"z_sequences" handle Fail _ => ();
val icl'was_tco_flag = get_flag "z_type_check_only";
val icl'was_ax_flag = get_flag "z_use_axioms";
set_flag ("z_type_check_only", false);
set_flag ("z_use_axioms", true);
new_theory"z_sequences";
=TEX
\section {DEFINITION OF FIXITY}

The following fixity information has been taken from \cite{Spivey89}.
¹Z
fun 4 _ ù _
°

¹Z
rel _ partition _, disjoint _
°
¹Z
gen 7 seq _, seq‰1 _, iseq _
°

\section{SEQUENCES}

¹Z
Ûseqİ X ¦ {f:î Ÿ X | dom f = 1  .. # f}
°

¹Z
Ûseq‰1İ X ¦ {f:seq X | # f > 0}
°

¹Z
Ûiseqİ X ¦ (seq X) ¡ (î ş X)
°

\subsection{Concatenation}

[X]œœœœœœœœœœœœœœœœ
Ü _ Ûëİ _ : (seq X) ¸ (seq X) ­ seq X
÷üüüüüüüüüüüüüüüüüü
Ü µ s, t : seq X · s ë t = s À {n : dom t | true · n + # s í t(n)}
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Sequence Decomposition}

[X]œœœœœœœœœœœœœœœœ
Ü Ûheadİ : seq‰1 X ­ X
÷üüüüüüüüüüüüüüüüüü
Ü µ s : seq‰1 X · head s = s (1)
ˆüüüüüüüüüüüüüüüüüüüü

[X]œœœœœœœœœœœœœœœœ
Ü Ûlastİ : seq‰1 X ­ X
÷üüüüüüüüüüüüüüüüüü
Ü µ s : seq‰1 X · last s = s (# s)
ˆüüüüüüüüüüüüüüüüüüüü

[X]œœœœœœœœœœœœœœœœ
Ü Ûtailİ : seq‰1 X ­ seq X
÷üüüüüüüüüüüüüüüüüü
Ü µ s : seq‰1 X ·
Ü	tail s = (Ìn : 1 .. (# s - 1) · s(n + 1))
ˆüüüüüüüüüüüüüüüüüüüü

[X]œœœœœœœœœœœœœœœœ
Ü Ûfrontİ:seq‰1 X ­ seq X
÷üüüüüüüüüüüüüüüüüü
Üµ s : seq‰1 X ·
Ü	front s = (1  .. (# s - 1)) ò s
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Reverse}

[X]œœœœœœœœœœœœœœœœ
Ü Ûrevİ : seq X ­ seq X
÷üüüüüüüüüüüüüüüüüü
Ü µ s : seq X ·
Ü	rev s = (Ìn:dom s · s(# s - n + 1))
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Filtering}

[X]œœœœœœœœœœœœœœœœ
Ü _ Ûùİ _ : (seq X) ¸ ğ X ­ seq X
÷üüüüüüüüüüüüüüüüüü
Ü µ V : ğ X ·
Ü	§ ¢ ù V = § ¢ ±
Ü	(µx:X ·	(x  V ´ §x¢ ù V = §x¢) ±
Ü		(x  V ´ §x¢ ù V = § ¢)) ±
Ü	(µs,t:seq X ·
Ü		(s ë t) ù V = (s ù V) ë (t ù V))
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Distributed Concatenation}

[X]œœœœœœœœœœœœœœœœ
Ü Û‹İ : seq (seq X) ­ seq X
÷üüüüüüüüüüüüüüüüüü
Ü	‹ § ¢ = § ¢ ±
Ü	(µs:seq X · ‹ §s¢ = s) ±
Ü	(µq,r:seq(seq X) ·
Ü		‹(q ë r) = (‹ q) ë (‹ r))
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Disjointness and Partitions}

[I,X]œœœœœœœœœœœœœœœœ
Ü Ûdisjointİ _ : ğ (I ß ğ X)
÷üüüüüüüüüüüüüüüüüü
Ü µ S : I ß ğ X ·
Ü	(disjoint S ¤
Ü		(µ i , j : dom S | i ½ j · S(i) ¡ S(j) = š))
ˆüüüüüüüüüüüüüüüüüüüü

[I,X]œœœœœœœœœœœœœœœœ
Ü _ Ûpartitionİ _ : (I ß ğ X) ª ğ X
÷üüüüüüüüüüüüüüüüüü
Ü µ S : I ß ğ X; T : ğ X ·
Ü	(S partition T ¤
Ü		disjoint S ± Ş {i : dom S | true · S(i)} = T)
ˆüüüüüüüüüüüüüüüüüüüü
\section{START OF STRUCTURE}
=DOC
signature ÛZSequencesİ = sig
=DESCRIBE
This provides the basic proof support for the Z library sequences.
It creates the theory $z\_sequences$.
=ENDDOC
=THDOC
req_name Û"z_sequences"İ (Value "z_numbers");
req_language "Z";
set_flag("tc_thms_only",true);
=DESCRIBE
The theory $z\_sequences$ contains various definitions of relation operators, and ``defining theorems'' of Z library constants derived from these definitions.
It is created in structure $ZSequences$.
=ENDDOC

=DOC
val Ûz'seq_defİ : THM;
val Ûz'seq‰1_defİ : THM;	val Ûz'iseq_defİ : THM;
val Ûz'ë_defİ : THM;	val Ûz'head_defİ : THM;
val Ûz'last_defİ : THM;	val Ûz'tail_defİ : THM;
val Ûz'front_defİ : THM;	val Ûz'rev_defİ : THM;
val Ûz'ù_defİ : THM;	val Ûz'‹_defİ : THM;
val Ûz'disjoint_defİ : THM;	val Ûz'partition_defİ : THM;
=DESCRIBE
These are the definitions of the theory of $z\_sequences$.
=ENDDOC

\section{EPILOGUE}
=SML
end (* of signature ZSequences *);
=TEX
=SML
set_flag ("z_type_check_only", icl'was_tco_flag);
set_flag ("z_use_axioms", icl'was_ax_flag);
=TEX

\section{TEST POLICY}
The module tests for this module are to follow the guidelines
laid down in the quality plan~\cite{DS/FMU/IED/PLN008}.

\twocolumn[\section{INDEX}]
\small
\printindex

\end{document}


=IGN
delete_const ¬$"z'_ À _"®;

 [X]œœœœœœœœœœœœœœœœ
 Ü _ ÛÀİ _ : ğ X ¸ ğ X ­ ğ X
 ÷üüüüüüüüüüüüüüüüüü
 Üµ x  : ğ X · x À x = X
 ˆüüüüüüüüüüüüüüüüüüüü

dest_Zapp ñ x À x ®;
dest_app ñ x À x ®;

