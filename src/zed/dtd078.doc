=IGN
********************************************************************************
dtd078.doc: this file is part of the PPZed system

Copyright (c) 2002 Lemma 1 Ltd.

See the file LICENSE for your rights to use and change this file.

Contact: Rob Arthan < rda@lemma-one.com >
********************************************************************************
%  dtd078.doc  %Z% $Date: 2011/07/19 12:19:03 $ $Revision: 1.34 $ $RCSfile: dtd078.doc,v $
=TEX
% TQtemplate.tex
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{FST PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Detailed Design of the Z Library Set Theory}  %% Mandatory field
\TPPref{DS/FMU/IED/DTD078}  %% Mandatory field
\def\SCCSversion{$Revision: 1.34 $%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date: 2011/07/19 12:19:03 $%
}}
%\TPPstatus{Approved}
\TPPstatus{Draft}
\TPPtype{Specification}
\TPPkeywords{HOL}
% \TPPauthor{D.J.~King & WIN01}  %% Mandatory field
\TPPauthors{D.J.~King & WIN01&WIN01\\K.~Blackburn & WIN01}
\TPPauthorisation{R.D.~Arthan & FST Team Leader}
\TPPabstract{This document contains the detailed design of
the Z Library Set Theory and its proof support.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
      Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}

\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : Lemma 1 Ltd. \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}  % to get section number `0.3'
\begin{description}

\item[Issue 1.4, (27th July 1992) ] Load the library in axiomatic proof mode.
\item [Issue 1.7 (12th October 1992)]
Moved $€$ definition to \cite{DS/FMU/IED/DTD052}.
\item [Issue 1.8 (19th October 1992)]
Changed parent theory.
\item [Issue 1.9 (22nd October 1992)]
Change of name and nature to Z Library Set Theory.
\item [Issue 1.10 (30th October 1992)]
Tidying.
\item [Issue 1.11, 11th November 1992]
Changes as a consequence of changes in dependences.
Added proof contexts ``z$\_$sets$\_$ext'',
``z$\_$sets$\_$alg''
and supporting material.
\item[Issue 1.12 (2nd December 1992)]
Improved $ƒ$ simplification.
\item[Issue 1.13 (3rd December 1992)]
Added .
\item[Issue 1.14 (10th December 1992)]
Global rename from wrk038.doc issue 1.9.
\item[Issue 1.15 (17th December 1992)]
Remove spurious ML bindings.
\item[Issue 1.16 (19th January 1993)]
Added $z\_sets\_ext\_clauses$.
\item[Issue 1.18 (10th February 1993)]
Changes to proof contexts, etc.
\item[Issue 1.21] Copyright and banner updates for open source release.
\item[Issue 1.22] PPZed-specific updates for open source release
\item[Issue 1.23] The Z universal set is now called ƒ.
\item[Issues 1.24, 1.25] Addressed comments on USR030 from QinetiQ.
\item[Issue 1.26] Precedences and associativity of toolkit operators now follow \cite{ISO02}.
\item[Issue 1.27] BOOL and CHAR are now renamed as – and ¿.
\item[Issue 1.28] Adapted to use more generalised templates and added definition of conditional.
\item[Issues 1.29, 1.30] Added support for conditionals.
\item[Issues 1.31] Added symmetric difference.
\item[Issue 1.32] Moved º,  and if-then-else into theory {\em z\_lanbuage\_ps} (not effective).
\item[Issue 1.33] Added syntax functions for subset terms.
\item[Issue 1.34]  Backed out the attempt to have º,  and if-then-else in theory {\em z\_language\_ps}; Added %<<%\_%>>%.
\itempIssue 1.35] Added underlining brackets operator.
\end{description}
\subsection{Changes Forecast}
None.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains the detailed design
of the set theory material of the Z Library.
The high level design for this material is given in \cite{DS/FMU/IED/HLD017}.
\subsection{Introduction}
This document contains the detailed design
of the set theory material of the Z Library.

By default all relevant functions in this document should
be assumed to remain within the Z language and to check this fact, unless otherwise stated.
\subsection{Purpose and Background}
See \cite{DS/FMU/IED/HLD017}.
\subsection{Dependencies}
Loading this document and its implementation is dependent on
the Z Library Sets, \cite{DS/FMU/IED/IMP043}.
\subsection{Possible Enhancements}
None.
\subsection{Deficiencies}
None known.
\section {ADDITIONAL DEFINITIONS FOR {\em z\_language\_ps}}
=SML
open_theory"z_language_ps";
push_pc "z_predicates";
val _ = set_flag ("z_type_check_only", false);
val _ = set_flag ("z_use_axioms", true);
delete_theory"z_sets" handle Fail _ => ();
new_theory"z_sets";
=TEX
\section {DEFINITION OF FIXITY}

The following fixity information is taken from \cite{ISO02}.

¹Z
function 25 leftassoc _ £ _
°

¹Z
function 30 leftassoc _ À _, _ \ _
°

¹Z
function 40 leftassoc _ ¡ _
°

¹Z
relation _ ½ _, _  _, _   _
°
¹Z
generic 5 rightassoc _ ª _, _ ­ _
°

¹Z
generic 70 ğ‰1 _
°

We also have the conditional operator and the extras that support the use of the {\ProductZ} language.
¹Z
function 0 if _? then _! else _!
°
¹Z
function 0 rightassoc _ º _
°
¹Z
Ü function 0 %<<% _! %>>%
°
¹Z
function 0  _?
°


¹Z
relation _ õ _ ö _
°

\section{FUNCTION AND RELATION}
These are introduced in this document to allow us to define
the types of the rest of the Z library:
by category they belong to the Z relations and functions documents
respectively.
¹Z
X Ûªİ Y ¦ ğ (X ¸ Y)
°


¹Z
X Û­İ Y ¦ {f : X ª Y | µ x : X · ¶‰1 y : Y · (x, y)  f}
°


\section{SETS}
Note that $€$ has been defined in \cite{DS/FMU/IED/DTD052}
as, though strictly part of the Z Library, it is needed to implement the representation of Z Language declarations
in that document.
\subsection{Inequality and Non-membership}

[X]œœœœœœœœœœœœœœœœ
Ü _ Û½İ _ : X ª X;
Ü _ Ûİ _ : X ª ğ X
÷üüüüüüüüüüüüüüüüüü
Ü(µ x, y : X · x ½ y ¤ ³ (x = y))
Ü±
Ü(µ x : X; S : ğ X · x  S ¤ ³ (x  S))
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Empty Set}

¹Z
Ûšİ [X] ¦ {x : X | false}
°

\subsection{Subset Relation and Proper Subset Relation}

[X]œœœœœœœœœœœœœœœœ
Ü _ Û İ _ : ğ X ª ğ X
÷üüüüüüüüüüüüüüüüüü
Üµ S, T : ğ X ·
Ü	(S   T ¤ S € T ± S ½ T)
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Non-Empty Subsets}

¹Z
Ûğ‰1İ X ¦ {S : ğ X | S ½ š }
°

\subsection{Set Union, Intersection, Difference and Symmetric Difference}

[X]œœœœœœœœœœœœœœœœ
Ü _ ÛÀİ _, _ Û¡İ _, _ Û\İ _, _ Û£İ _: ğ X ¸ ğ X ­ ğ X
÷üüüüüüüüüüüüüüüüüü
Üµ S, T : ğ X ·
Ü	S À T = {x : X | x  S ² x  T} ±
Ü	S ¡ T = {x : X | x  S ± x  T} ±
Ü	S \ T = {x : X | x  S ± x  T} ±
Ü	S £ T = {x : X | ³(x  S ¤ x  T)}
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Generalized Union and Intersection}


[X]œœœœœœœœœœœœœœœœ
Ü ÛŞİ, Û¥İ  : ğ (ğ X) ­ ğ X
÷üüüüüüüüüüüüüüüüüü
Üµ A : ğ (ğ X) ·
Ü	Ş A = {x : X | (¶ S : A · x  S)} ±
Ü	¥ A = {x : X | (µ S : A · x  S)}
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{First and Second of Ordered Pairs}


[X, Y]œœœœœœœœœœœœœœœœ
Ü Ûfirstİ : X ¸ Y ­ X;
Ü Ûsecondİ : X ¸ Y ­ Y
÷üüüüüüüüüüüüüüüüüü
Ü µ x : X; y : Y ·
Ü	first (x, y) = x ±
Ü	second (x, y) = y
ˆüüüüüüüüüüüüüüüüüüüü

=TEX
\subsection{Conditionals}
[X]œœœœœœœœœœœœœœœœ
Ü Ûif _? then _! else _!İ : – ¸ X ¸ X ­ X
÷üüüüüüüüüüüüüüüüüü
Ü µx, y:X·
Ü	(if true then x else y) = x
Ü ±	(if false then x else y) = y
ˆüüüüüüüüüüüüüüüüüüüü

\subsection{Casts}
These are not part of the Standard Z Library, but are required to support
the use of the {\ProductZ} language as discussed in \cite{DS/FMU/IED/DEF007}.

[X]œœœœœœœœœœœœœœœœ
Ü Û_ º _İ : X ¸ ğ X ­ X
÷üüüüüüüüüüüüüüüüüü
Ü	(_ º _) = first
ˆüüüüüüüüüüüüüüüüüüüü
¹ZAX
	Û _?İ : – ­ –
÷üüüüüüüüüüüüüüüüüüüüü
	µx:–·(_?) x = x
°

\subsection{The Guillemet Brackets}
These are not part of the Standard Z Library, but are required to support
the use of the {\ProductZ} language as discussed in \cite{DS/FMU/IED/DEF007}.
[X]œœœœœœœœœœœ
Ü %<<% _! %>>% : X ­ X
÷üüüüüü
Ü µx:X· %<<%x%>>% = x
ˆüüüüüüüüüüüüüü


\subsection{Underlining Brackets}
These are not part of the Standard Z Library, but
provide the language feature whereby an underlined expression works syntactically like ans infix relation  \cite{DS/FMU/IED/DEF007}.
[X, Y]œœœœœœœœœœœ
Ü _ õ _ ö _ : ğ(X ¸ ğ(X ¸ Y) ¸ Y)
÷üüüüü
Ü µx:X; R : ğ(X ¸ Y); y: Y· x õ R ö y ¤ (x, y)  R
ˆüüüüüüüüüüüüüüüüü


\section{START OF STRUCTURE}
=DOC
signature ÛZSetsİ = sig
=DESCRIBE
This provides the Z library sets material.
It creates the theory $z\_sets$.
=ENDDOC
=THDOC
req_name Û"z_sets"İ (Value "z_language_ps");
req_language "Z";
set_flag("tc_thms_only",true);
=DESCRIBE
The theory $z\_sets$ contains various definitions and ``defining theorems'' of Z library constants concerned wit hset theory, combined with some reasoning tools for these constants.
It is created in structure $ZSets$.
=ENDDOC

The following theorems are mostly just definitions
instantiated to $ñƒ®$ where appropriate,
perhaps with the addition of set extensionality.
=THDOC
req_thm(Û"z_first_thm"İ, ([],ñµ x: ƒ ·
	first x = x.1®));
req_thm(Û"z_second_thm"İ, ([],ñµ x: ƒ ·
	second x = x.2®));
=DESCRIBE
Projections from pairs.
=SEEALSO
$z\_\_first\_thm$, $z\_\_second\_thm$.
=ENDDOC
The following theorems are mostly just definitions
instantiated to $ñƒ®$ where appropriate,
perhaps with the addition of set extensionality.
=THDOC
req_thm(Û"z_½_thm"İ, ([],ñµ x:ƒ; y: ƒ· (x ½ y) ¤ ³(x = y)®));
req_thm(Û"z__thm"İ, ([],ñµ x: ƒ; S: ƒ·
	x  S ¤ ³(x  S)®));
=DESCRIBE
Inequality and ``non-membership''.
=ENDDOC
Spivey Ed 1. page 89.
=THDOC
req_thm(Û"z_€_thm1"İ,([],¬µ X:'a SET·
	ñ((_ € _)[X])  (_ ª _)[ğ X, ğ X] ±
	(µ S, T : ğ X
            · ((S, T)  (_ € _)[X] ¤ (µ x : X · x  S ´ x  T)))®®));
=DESCRIBE
This is the form that a definition of $€$ would have taken if
it had been introduced in the Z library.
=ENDDOC
	
=THDOC
req_thm(Û"z_š_thm"İ, ([],ñµ x1: ƒ· ³(x1  š)®));
req_thm(Û"z_š_thm1"İ, ([],ñš = {}®));
req_thm(Û"z_€_thm"İ, ([],ñµ s:ƒ; t: ƒ·
	(s € t) ¤ (µ x: ƒ·x  s ´ x  t)®));
req_thm(Û"z__ğ_thm"İ, ([],ñµ s:ƒ; t: ƒ·
	(s  ğ t) ¤ (s € t)®));
req_thm(Û"z_ _thm"İ, ([],ñµ s:ƒ; t: ƒ·
	(s   t) ¤ (s € t) ± s ½ t®));
req_thm(Û"z_ğ‰1_thm"İ, ([],
	inst[] [(”'X®,”'a®)]
	ñµ X:ƒ · (ğ‰1 X) = {S : ğ X | S ½ š}®));
=DESCRIBE
Empty set, subset, proper subset and non-empty power set.
=ENDDOC
Spivey Ed 1. page 90.
=THDOC
req_thm(Û"z_À_thm"İ, ([],ñµ z: ƒ; s:ƒ; t: ƒ ·
	z  (s À t) ¤ z  s ² z  t®));
req_thm(Û"z_¡_thm"İ, ([],ñµ z: ƒ; s:ƒ; t: ƒ·
	z  (s ¡ t) ¤ z  s ± z  t®));
req_thm(Û"z_set_dif_thm"İ, ([],ñµ z: ƒ; s:ƒ; t: ƒ·
	z  (s \ t) ¤ z  s ± (z  t)®));
req_thm(Û"z_£_thm"İ, ([],ñµ z: ƒ; s:ƒ; t: ƒ·
	z  (s £ t) ¤ ³(z  s ¤ z  t)®));
=DESCRIBE
Set union, intersection,difference and symmetric difference.
=ENDDOC
Spivey Ed 1. page 91.

=THDOC
req_thm(Û"z_Ş_thm"İ, ([],ñµ z: ƒ; a: ƒ·
	z  Ş a ¤ (¶ S : ƒ · S  a ± z  S)®));
req_thm(Û"z_¥_thm"İ, ([],ñµ z: ƒ; a: ƒ·
	z  ¥ a ¤ (µ S : ƒ · S  a ´ z  S)®));
=DESCRIBE
Generalised set union and intersection.
=ENDDOC
Spivey Ed 1. page 92.
=DOC
val Ûz_€_convİ : CONV;
=DESCRIBE
Use $z\_€\_thm$ in combination with
knowledge about tuples.
Given as input an equality of the form $v\ €\ w$ then:

If $w$ is of type $ty$ $SET$ where $ty$ is not a tuple type:
=FRULE 1 Conversion
z_€_conv
ñv € w®
÷
÷
ô (v € w) ¤
	(µ xn : ƒ · xn  v ´ xn  w)
=TEX
where $xn$ is the first variable in the list $x1$, $x2$,...
that doesn't appear in $v$ or $w$ (free or bound).

If $w$ is of type $ty$ $SET$ where $ty$ is an n-tuple type, or binding type, then sufficient $x_i$ will be introduced,
instead of just $xn$, to allow $xn$ to be replaced by a construct
of bindings and tuples of the $x_i$, such that no $x_i$ has a binding or tuple type and appears exactly once in the construct.
=EXAMPLE
z_€_conv ñp € r ¸ [a,b:X] ¸ x2® =
ô p € r ¸ [a, b : X] ¸ x2
    ¤ (µ x1 : ƒ; x3 : ƒ; x4 : ƒ; x5 : ƒ
      · (x1, (a ¦ x3, b ¦ x4), x5)  p
        ´ (x1, (a ¦ x3, b ¦ x4), x5)  r ¸ [a, b : X] ¸ x2)
=TEX
Notice how the introduced universal quantification ``skips''
$x2$ which is present in the input term.
=SEEALSO
$z\_€\_thm$, $z\_\_ğ\_conv$.
=FAILURE
78001	?0 is not of the form ñv € w®
=ENDDOC
=THDOC
req_thm(Û"z_À_clauses"İ,([], ñ
	µ a : ƒ ·
		(a À {} = a)
	±	({} À a = a)
	±	(a À ƒ = ƒ)
	±	(ƒ À a = ƒ)
	±	(a À a = a)®));
=DESCRIBE
``$z\_À\_clauses$'' provides simplifying clauses associated with ``$\$À$''.
=ENDDOC
=THDOC
req_thm(Û"z_¡_clauses"İ,([], ñ
	µ a : ƒ ·
		(a ¡ {} = {})
	±	({} ¡ a = {})
	±	(a ¡ ƒ = a)
	±	(ƒ ¡ a = a)
	±	(a ¡ a = a)®));
=DESCRIBE
``$z\_¡\_clauses$'' provides simplifying clauses associated with ``$\$¡$''.
=ENDDOC
=THDOC
req_thm(Û"z_set_dif_clauses"İ,([], ñ
	µ a : ƒ·
		(a \ {} = a)
	±	({} \ a = {})
	±	(a \ ƒ = {})
	±	(a \ a = {})®));
=DESCRIBE
``$z\_set\_dif\_clauses$'' provides simplifying clauses associated with ``$\$\verb+\+$''.
=ENDDOC
=THDOC
req_thm(Û"z_£_clauses"İ,([], ñ
	µ a : ƒ ·
		(a £ {} = a)
	±	({} £ a = a)
	±	(a £ ƒ = ƒ \ a)
	±	(ƒ £ a = ƒ \ a)
	±	(a £ a = {})®));
=DESCRIBE
``$z\_£\_clauses$'' provides simplifying clauses associated with ``$\$£$''.
=ENDDOC
=THDOC
req_thm(Û"z_€_clauses"İ,([], ñ
	µ a : ƒ ·
		(a € a)
	±	({} € a)
	±	(a € ƒ)®));
=DESCRIBE
``$z\_€\_clauses$'' provides simplifying clauses associated with ``$\$€$''.
=ENDDOC
=THDOC
req_thm(Û"z_ _clauses"İ,([], ñ
	µ a : ƒ ·
		³ (a   a)
	±	³ (a   {})
	±	({}   ƒ)®));
=DESCRIBE
``$z\_ \_clauses$'' provides simplifying clauses associated with ``$\$ $''.
=ENDDOC
=THDOC
req_thm("z_Ş_clauses",([], ñ
		(Ş {} = {})
	±	(Ş ƒ = ƒ)®));
=DESCRIBE
``$z\_Ş\_clauses$'' provides simplifying clauses associated with ``$\$Ş$''.
=ENDDOC
=THDOC
req_thm(Û"z_¥_clauses"İ,([], ñ
		(¥ {} = ƒ)
	±	(¥ ƒ = {})®));
=DESCRIBE
``$z\_¥\_clauses$'' provides simplifying clauses associated with ``$\$¥$''.
=ENDDOC
=THDOC
req_thm(Û"z_ğ_clauses"İ,([], ñ
	µ a : ƒ ·
		(ğ {} = {{}})
	±	(ğ ƒ = ƒ)
	±	a  ğ a
	±	{}  ğ a®));
=DESCRIBE
``$z\_ğ\_clauses$'' provides simplifying clauses associated with ``$\$ğ$''.
=ENDDOC
=THDOC
req_thm(Û"z_ğ‰1_clauses"İ,([], ñ
	µ a : ƒ ·
		(ğ‰1 {} = {})
	±	(a  ğ‰1 a ¤ a ½ {})
	±	³({}  ğ‰1 a)®));
=DESCRIBE
``$z\_ğ‰1\_clauses$'' provides simplifying clauses associated with ``$\$ğ‰1$''.
=ENDDOC
=THDOC
req_thm(Û"z_¸_clauses"İ,([], ñ
	µ a : ƒ ·
		(a ¸ {} = {})
	±	({} ¸ a = {})
	±	(ƒ ¸ ƒ = ƒ)®));
=DESCRIBE
``$z\_¸\_clauses$'' provides simplifying clauses associated with ``$\$¸$''.
=ENDDOC
=THDOC
req_thm(Û"z_sets_ext_clauses"İ,([], ñ
	µ s,t : ƒ ·
	((s = t) ¤ (µ x : ƒ · x  s ¤ x  t))
	±
	((s € t) ¤ (µ x : ƒ · x  s ´ x  t))
	±
	((s   t) ¤ ((µ x : ƒ · x  s ´ x  t) ± (¶ y : ƒ · y  t ± ³(y  s))))
	®));
=DESCRIBE
These are the three basic extensionality results for Z set theory.
It is better to use the facilities in the proof contexts
``$'z\_sets\_ext\_lib$'' and ``$'z\_sets\_ext\_lang$''
rather than use these for rewriting, and the proof context material
will introduce``good''  unique variable names, rather than repeatedly prime $x$.
=ENDDOC
=DOC
val Ûz_seta_false_convİ : CONV;
=DESCRIBE
Simplifies a Z set abstraction whose predicate is false.
=FRULE 1 Conversion
z_seta_false_conv
ñ{ D | false · P}®
÷
÷
ô{ D | false · P} = {}
=TEX
=FAILURE
78002	?0 is not of the form: ñ{D | false · P}®
=ENDDOC
=THDOC
req_thm(Û"z_if_thm"İ,([], ñ
	µ x, y : ƒ ·
		(if true then x else y) = x
	±	(if false then x else y) = y
	®));
=DESCRIBE
The defining property of the conditional instantiate to ƒ.
=ENDDOC

=THDOC
req_thm(Û"z_guillemets_thm"İ,([], ñ
	µ x : ƒ · %<<% x %>>% = x
	®));
=DESCRIBE
Rewrite rule to eliminate the guillemet brackets.
=ENDDOC

=THDOC
req_thm(Û"z_underlining_brackets_thm"İ,([], ñ
	µ x : ƒ; R : ƒ; y : ƒ · x õ R ö y ¤ (x, y)  R
	®));
=DESCRIBE
Rewrite rule to eliminate the underlining; brackets.
=ENDDOC

\section{THEOREMS IN SIGNATURE}
=DOC
val Ûz_½_thmİ: THM;
val Ûz__thmİ: THM;
val Ûz_š_thmİ: THM;
val Ûz_€_thmİ: THM;
val Ûz_€_thm1İ: THM;
val Ûz_ _thmİ: THM;
val Ûz__ğ_thmİ: THM;
val Ûz_ğ‰1_thmİ: THM;
val Ûz_À_thmİ: THM;
val Ûz_¡_thmİ: THM;
val Ûz_set_dif_thmİ: THM;
val Ûz_£_thmİ: THM;
val Ûz_Ş_thmİ: THM;
val Ûz_¥_thmİ: THM;
val Ûz_first_thmİ: THM;
val Ûz_second_thmİ: THM;
val Ûz_À_clausesİ: THM;
val Ûz_¡_clausesİ: THM;
val Ûz_set_dif_clausesİ: THM;
val Ûz_£_clausesİ: THM;
val Ûz_€_clausesİ: THM;
val Ûz_ _clausesİ: THM;
val Ûz_Ş_clausesİ: THM;
val Ûz_¥_clausesİ: THM;
val Ûz_ğ_clausesİ: THM;
val Ûz_ğ‰1_clausesİ: THM;
val Ûz_¸_clausesİ: THM;
val Ûz_if_thmİ: THM;
val Ûz_guillemets_thmİ: THM;
val Ûz_underlining_brackets_thmİ: THM;
val Ûz_sets_ext_clausesİ: THM;
=DESCRIBE
These are the ML bindings of the theorems of the theory $z\_sets$.
=ENDDOC

=DOC
val Ûz_½_defİ : THM;
val Ûz__defİ : THM;
val Ûz_š_defİ : THM;
val Ûz_ _defİ : THM;
val Ûz_ğ‰1_defİ : THM;
val Ûz_À_defİ : THM;
val Ûz_¡_defİ : THM;
val Ûz_setdif_defİ : THM;
val Ûz_£_defİ : THM;
val Ûz_Ş_defİ : THM;
val Ûz_¥_defİ : THM;
val Ûz_first_defİ : THM;
val Ûz_second_defİ : THM;
val Ûz_ª_defİ : THM;
val Ûz_­_defİ : THM;
=DESCRIBE
These are the ML bindings of the definitions of the theory $z\_sets$.
=ENDDOC
=DOC
val Ûz_º_defİ : THM;
val Ûz'_defİ : THM;
val Ûz'if_defİ : THM;
val Ûz'guillemets_defİ : THM;
val Ûz'underlining_brackets_defİ : THM;
=DESCRIBE
These are the ML bindings of the definitions of built-in global variables
that support the use of the {\ProductZ} language.
=ENDDOC
=DOC
val Ûmk_z_€İ : (TERM * TERM) -> TERM;
val Ûdest_z_€İ : TERM -> (TERM * TERM);
val Ûis_z_€İ : TERM -> bool;
=DESCRIBE
Constructor, destructor and discriminator functions for Z subset terms.
=FAILURE
78006	?0 is not of the form ña € s®
78004	?0 and ?1 do not have the same types
78007	?0 does not have a Z set type
=ENDDOC
=DOC
val Ûmk_z_ifİ : (TERM * TERM * TERM) -> TERM;
val Ûdest_z_ifİ : TERM -> (TERM * TERM * TERM);
val Ûis_z_ifİ : TERM -> bool;
=DESCRIBE
Constructor, destructor and discriminator functions for Z conditional terms.
=FAILURE
78003	?0 is not a Z conditional term
78004	?0 and ?1 do not have the same types
78005	?0 is not of type ”BOOL®
=ENDDOC
\section{PROOF CONTEXTS}
We provide the following proof contexts to reason about the above:

\begin{tabular}{l p{4in}}
$'z\_\_set\_lib$ & Simple algebraic reasoning about set theory of the Z library, especially $$. (e.g. $À$) \\
$'z\_sets\_ext\_lib$ & Extensional reasoning about set theory (e.g. $¡$) \\
$'z\_normal$ & normalisation of $½$, $$, $š$ and $x\ \ ğ\ y$. \\
\end{tabular}
=DOC
(* Proof Context: Û'z__set_libİ *)
=DESCRIBE
A component proof context for handling the membership of expressions created by Z set operations of the Z library.

Predicates and expressions treated by this proof context are constructs formed from:
=GFT
¥, Ş, ¡, À, \, £, ğ‰1, š
=TEX
\paragraph{Contents}\

Rewriting:
=GFT
=TEX

Stripping theorems:
=GFT
=TEX

Stripping conclusions:
=GFT
=TEX
All three of the above have theorems concerning the membership ($$) of terms generated by the following operators:
=GFT
¥, Ş, ¡, À, \, £, ğ‰1, š
=TEX
Stripping also contains the above in negated forms.

Rewriting canonicalisation:
=GFT
=TEX
$ƒ$ simplification has the definition of $ª$ added.

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_sets$.
It is intended to be used with proof context ``$'$z$\-\_$set$\-\_$lang'' and ``$'$z$\-\_$normal''
It is not intended to be mixed with HOL proof contexts.
=SEEALSO
$'z\_sets\_ext\_lib$
=ENDDOC
=DOC
(* Proof Context: Û'z_normalİ *)
=DESCRIBE
A component proof context for normalising certain constructs of the Z library.
The normalisation is done to fix on, in each case, one of two
possible equivalent representations of the same concept.
These constructs are:
=GFT
x ½ y    		normalised to ³(x = y)
x  y    		normalised to ³(x  y)
š        		normalised to {}
x  ğ y  		normalised to x € y
if true then x else y	normalised to x
if false then x else y	normalised to y
=TEX
\paragraph{Contents}\

Rewriting:
=GFT
z__ğ_thm, z_š_thm1, z__thm, z_½_thm, z_if_thm
=TEX

Stripping theorems:
=GFT
z__ğ_thm, z_š_thm, z__thm, z_½_thm, z_if_thm
and these all pushed through ³
=TEX

Stripping conclusions:
=GFT
z__ğ_thm, z_š_thm, z__thm, z_½_thm, z_if_thm
and these all pushed through ³
=TEX

Rewriting canonicalisation:
=GFT
=TEX
$ƒ$ simplification has the definition of $ª$ added.

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_sets$.
It is intended to be used with proof contexts ``$'$z$\-\_$set$\_$lib'' or ``$'$z$\-\_$set$\_$alg''.
=ENDDOC
Strictly $z\_½\_thm$ is a Z library predicate operator,
rather than a set operator.

$z\_\_ğ\_thm$ is included as this seems the best non-extensional rule for $ğ$, given $€$ is available.

=DOC
(* Proof Context: Û'z_sets_algİ *)
=DESCRIBE
A component proof context for handling algebraic reasoning of expressions created by Z set operations of the Z library.

Predicates and expressions treated by this proof context are constructs formed from:
=GFT
, ¡, À, \, £, €,  , ¥, Ş, ğ, ğ‰1, {D | false · V}, ¸
=TEX
\paragraph{Contents}\

Rewriting:
=GFT
z_À_clauses, z_¡_clauses, z_set_dif_clauses, z_£_clauses,
z_€_clauses, z_ _clauses, z_Ş_clauses, z_¥_clauses,
z_ğ_clauses, z_ğ‰1_clauses, z_seta_false_conv,
z_¸_clauses
=TEX

Stripping theorems:
=GFT
z_À_clauses, z_¡_clauses, z_set_dif_clauses, z_£_clauses,
z_€_clauses, z_ _clauses, z_Ş_clauses, z_¥_clauses,
z_ğ_clauses, z_ğ‰1_clauses, z_seta_false_conv,
z_¸_clauses
as necessary converted to membership statements by _C,
And all of this pushed through ³
=TEX
Stripping conclusions:
=GFT
z_À_clauses, z_¡_clauses, z_set_dif_clauses, z_£_clauses,
z_€_clauses, z_ _clauses, z_Ş_clauses, z_¥_clauses,
z_ğ_clauses, z_ğ‰1_clauses, z_seta_false_conv,
z_¸_clauses
as necessary converted to membership statements by _C,
And all of this pushed through ³
=TEX

Rewriting canonicalisation:
=GFT
=TEX

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_sets$.
It is intended to usable with proof context ``$'$z$\-\_\-\_$set$\-\_$lib'', and always with ``$'$z$\-\_$normal''.
The proof context ensures that its simplifications will
be attempted before more general rules concerned membership
of set operators are used.

It is not intended to be mixed with HOL proof contexts.
=ENDDOC
=DOC
(* Proof Context: Û'z_sets_ext_libİ *)
=DESCRIBE
An aggressive component proof context for handling the manipulation of Z set expressions, by breaking them into predicate calculus, within the Z library.

Predicates treated by this proof context are constructs formed from:
=GFT
€,  
=TEX
\paragraph{Contents}\

Rewriting:
=GFT
z_€_conv, z_ _thm, z_setd_€_conv
=TEX

Stripping theorems:
=GFT
z_€_conv, z_ _thm, z_setd_€_conv,
plus these all pushed in through ³
=TEX

Stripping conclusions:
=GFT
z_€_conv, z_ _thm, z_setd_€_conv,
plus these all pushed in through ³
=TEX
In all of the above $z\_setd\_€\_conv$, which does the conversion:
=GFT
{x1,x2,...} € y ---> x1  y ± x2  y ± ...
=TEX
is used, where applicable, in preference to $z\_€\_conv$, which, in the simplest cases, does the conversion:
=GFT
p € q ---> µ x1 · x1  p ´ xx1  q
=TEX

Rewriting canonicalisation:
=GFT
=TEX

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_sets$.
It is intended to always be used in conjunction with ``$'$z$\-\_$set$\-\_$lib'' and ``$'$z$\-\_$set$\-\_$ext$\-\_$lang''.
If used with ``$'$z$\_$sets$\_$alg'' then the simplification
in that proof context will take precedence over the
extensionality effects of this proof context.

It is not intended to be mixed with HOL proof contexts.
=SEEALSO
$'z\_\_set\_lib$
=ENDDOC
Notice that there is an overlap of sorts in stripping with ``$'$z$\_\_$set$\_$lib'' - the simplifications would usually
be discovered without these additions to the above proof context, but perhaps not as fast.

\section{EPILOGUE}
=SML
end (* end of signature ZSets *);
=TEX
=SML
reset_flag ("z_type_check_only");
reset_flag ("z_use_axioms");
=TEX

\section{TEST POLICY}
The module tests for this module are to follow the guidelines
laid down in the quality plan~\cite{DS/FMU/IED/PLN008}.

\twocolumn[\section{INDEX}]
\small
\printindex

\end{document}
