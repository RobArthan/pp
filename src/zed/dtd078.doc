=IGN
********************************************************************************
dtd078.doc: this file is part of the PPZed system

Copyright (c) 2002 Lemma 1 Ltd.

See the file LICENSE for your rights to use and change this file.

Contact: Rob Arthan < rda@lemma-one.com >
********************************************************************************
%  dtd078.doc  %Z% $Date: 2002/10/17 16:26:32 $ $Revision: 1.22 $ $RCSfile: dtd078.doc,v $
=TEX
% TQtemplate.tex
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{FST PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Detailed Design of the Z Library Set Theory}  %% Mandatory field
\TPPref{DS/FMU/IED/DTD078}  %% Mandatory field
\def\SCCSversion{$Revision: 1.22 $%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date: 2002/10/17 16:26:32 $%
}}
%\TPPstatus{Approved}
\TPPstatus{Draft}
\TPPtype{Specification}
\TPPkeywords{HOL}
% \TPPauthor{D.J.~King & WIN01}  %% Mandatory field
\TPPauthors{D.J.~King & WIN01&WIN01\\K.~Blackburn & WIN01}
\TPPauthorisation{R.D.~Arthan & FST Team Leader}
\TPPabstract{This document contains the detailed design of
the Z Library Set Theory and its proof support.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
      Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}

\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : Lemma 1 Ltd. \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}  % to get section number `0.3'
\begin{description}

\item[Issue 1.4, (27th July 1992) ] Load the library in axiomatic proof mode.
\item [Issue 1.7 (12th October 1992)]
Moved $Ä$ definition to \cite{DS/FMU/IED/DTD052}.
\item [Issue 1.8 (19th October 1992)]
Changed parent theory.
\item [Issue 1.9 (22nd October 1992)]
Change of name and nature to Z Library Set Theory.
\item [Issue 1.10 (30th October 1992)]
Tidying.
\item [Issue 1.11, 11th November 1992] 
Changes as a consequence of changes in dependences.
Added proof contexts ``z$\_$sets$\_$ext'',
``z$\_$sets$\_$alg''
and supporting material.
\item[Issue 1.12 (2nd December 1992)]
Improved $É$ simplification.
\item[Issue 1.13 (3rd December 1992)]
Added ê.
\item[Issue 1.14 (10th December 1992)]
Global rename from wrk038.doc issue 1.9.
\item[Issue 1.15 (17th December 1992)]
Remove spurious ML bindings.
\item[Issue 1.16 (19th January 1993)]
Added $z\_sets\_ext\_clauses$.
\item[Issue 1.18 (10th February 1993)]
Changes to proof contexts, etc.
\item[Issue 1.21] Copyright and banner updates for open source release.
\item[Issue 1.22] PPZed-specific updates for open source release
\item[Issue 1.23] The Z universal set is now called É.
\end{description}
\subsection{Changes Forecast}
None.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains the detailed design
of the set theory material of the Z Library.
The high level design for this material is given in \cite{DS/FMU/IED/HLD017}.
\subsection{Introduction}
This document contains the detailed design
of the set theory material of the Z Library.

By default all relevant functions in this document should
be assumed to remain within the Z language and to check this fact, unless otherwise stated.
\subsection{Purpose and Background}
See \cite{DS/FMU/IED/HLD017}.
\subsection{Dependencies}
Loading this document and its implementation is dependent on 
the Z Library Sets, \cite{DS/FMU/IED/IMP043}.
\subsection{Possible Enhancements}
None.
\subsection{Deficiencies}
None known.
\section {DEFINITIONS}
=SML
open_theory"z_language_ps";
push_pc "z_predicates";
delete_theory"z_sets" handle Fail _ => ();
val _ = set_flag ("z_type_check_only", false);
val _ = set_flag ("z_use_axioms", true);
new_theory"z_sets";
=TEX
\section {DEFINITION OF FIXITY}

The following fixity information has been taken from \cite{Spivey89}.
πZ
fun 3 _ ¿ _, _ \ _, _ Î _
∞

πZ
fun 4 _ ° _
∞

πZ
fun 7 _ ∫ _
∞

πZ
fun  ê _
∞

πZ
rel _ Ω _, _ é _, _ † _
∞
πZ
gen 5 _ ™ _, _ ≠ _
∞

πZ
gen 7 â1 _
∞

\section{FUNCTION AND RELATION}
These are introduced in this document to allow us to define
the types of the rest of the Z library:
by category they belong to the Z relations and functions documents
respectively.
πZ
X €™› Y ¶  (X ∏ Y)
∞


πZ
X €≠› Y ¶ {f : X ™ Y | µ x : X ∑ ∂â1 y : Y ∑ (x, y) ç f}
∞


\section{SETS}
Note that $Ä$ has been defined in \cite{DS/FMU/IED/DTD052}
as, though strictly part of the Z Library, it is needed to implement the representation of Z Language declarations
in that document.
\subsection{Inequality and Non-membership}

ù[X]úúúúúúúúúúúúúúúú
‹ _ €Ω› _ : X ™ X;
‹ _ €é› _ : X ™  X
˜¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
‹(µ x, y : X ∑ x Ω y § ≥ (x = y))
‹±
‹(µ x : X; S :  X ∑ x é S § ≥ (x ç S))
à¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸

\subsection{Empty Set}

πZ
€ö› [X] ¶ {x : X | false}
∞

\subsection{Subset Relation and Proper Subset Relation}

ù[X]úúúúúúúúúúúúúúúú
‹ _ €†› _ :  X ™  X
˜¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
‹µ S, T :  X ∑
‹	(S † T § S Ä T ± S Ω T)
à¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸

\subsection{Non-Empty Subsets}

πZ
€â1› X ¶ {S :  X | S Ω ö }
∞

\subsection{Set Union, Intersection and Difference}

ù[X]úúúúúúúúúúúúúúúú
‹ _ €¿› _, _ €°› _, _ €\› _ :  X ∏  X ≠  X
˜¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
‹µ S, T :  X ∑
‹	S ¿ T = {x : X | x ç S ≤ x ç T} ±
‹	S ° T = {x : X | x ç S ± x ç T} ±
‹	S \ T = {x : X | x ç S ± x é T}
à¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸

\subsection{Generalized Union and Intersection}


ù[X]úúúúúúúúúúúúúúúú
‹ €ﬁ›, €•›  :  ( X) ≠  X
˜¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
‹µ A :  ( X) ∑
‹	ﬁ A = {x : X | (∂ S : A ∑ x ç S)} ±
‹	• A = {x : X | (µ S : A ∑ x ç S)}
à¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸

\subsection{First and Second of Ordered Pairs}


ù[X, Y]úúúúúúúúúúúúúúúú
‹ €first› : X ∏ Y ≠ X;
‹ €second› : X ∏ Y ≠ Y
˜¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
‹ µ x : X; y : Y ∑
‹	first (x, y) = x ±
‹	second (x, y) = y
à¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
\subsection{Casts}
These are not part of the Standard Z Library, but are required for the
user interface as discussed in \cite{DS/FMU/IED/DEF007}. It would probably
be better if the definitions could be moved lower down the theory hierarchy.

ù[X]úúúúúúúúúúúúúúúú
‹ €_ ∫ _› : X ∏  X ≠ X
˜¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
‹	(_ ∫ _) = first
à¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
πZAX
	ê _: BOOL ≠ BOOL
˜¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸¸
	µx:BOOL∑(ê_) x = x
∞

\section{START OF STRUCTURE}
=DOC
signature €ZSets› = sig
=DESCRIBE
This provides the Z library sets material.
It creates the theory $z\_sets$.
=ENDDOC
=THDOC
req_name €"z_sets"› (Value "z_language_ps");
req_language "Z";
set_flag("tc_thms_only",true);
=DESCRIBE
The theory $z\_sets$ contains various definitions and ``defining theorems'' of Z library constants concerned wit hset theory, combined with some reasoning tools for these constants.
It is created in structure $ZSets$.
=ENDDOC

The following theorems are mostly just definitions
instantiated to $ÒÉÆ$ where appropriate,
perhaps with the addition of set extensionality.
=THDOC
req_thm(€"z_first_thm"›, ([],Òµ x: É ∑
	first x = x.1Æ));
req_thm(€"z_second_thm"›, ([],Òµ x: É ∑
	second x = x.2Æ));
=DESCRIBE
Projections from pairs.
=SEEALSO
$z\_ç\_first\_thm$, $z\_ç\_second\_thm$.
=ENDDOC
The following theorems are mostly just definitions
instantiated to $ÒÉÆ$ where appropriate,
perhaps with the addition of set extensionality.
=THDOC
req_thm(€"z_Ω_thm"›, ([],Òµ x:É; y: É∑ (x Ω y) § ≥(x = y)Æ));
req_thm(€"z_é_thm"›, ([],Òµ x: É; S: É∑
	x é S § ≥(x ç S)Æ));
=DESCRIBE
Inequality and ``non-membership''.
=ENDDOC
Spivey Ed 1. page 89.
=THDOC
req_thm(€"z_Ä_thm1"›,([],¨µ X:'a SET∑
	Ò((_ Ä _)[X]) ç (_ ™ _)[ X,  X] ±
	(µ S, T :  X
            ∑ ((S, T) ç (_ Ä _)[X] § (µ x : X ∑ x ç S ¥ x ç T)))ÆÆ));
=DESCRIBE
This is the form that a definition of $Ä$ would have taken if
it had been introduced in the Z library.
=ENDDOC
	
=THDOC
req_thm(€"z_ö_thm"›, ([],Òµ x1: É∑ ≥(x1 ç ö)Æ));
req_thm(€"z_ö_thm1"›, ([],Òö = {}Æ));
req_thm(€"z_Ä_thm"›, ([],Òµ s:É; t: É∑
	(s Ä t) § (µ x: É∑x ç s ¥ x ç t)Æ));
req_thm(€"z_ç__thm"›, ([],Òµ s:É; t: É∑
	(s ç  t) § (s Ä t)Æ));
req_thm(€"z_†_thm"›, ([],Òµ s:É; t: É∑
	(s † t) § (s Ä t) ± s Ω tÆ));
req_thm(€"z_â1_thm"›, ([],
	inst[] [(î'XÆ,î'aÆ)]
	Òµ X:É ∑ (â1 X) = {S :  X | S Ω ö}Æ));
=DESCRIBE
Empty set, subset, proper subset and non-empty power set.
=ENDDOC
Spivey Ed 1. page 90.
=THDOC
req_thm(€"z_¿_thm"›, ([],Òµ z: É; s:É; t: É ∑
	z ç (s ¿ t) § z ç s ≤ z ç tÆ));
req_thm(€"z_°_thm"›, ([],Òµ z: É; s:É; t: É∑
	z ç (s ° t) § z ç s ± z ç tÆ));
req_thm(€"z_set_dif_thm"›, ([],Òµ z: É; s:É; t: É∑
	z ç (s \ t) § z ç s ± (z é t)Æ));
=DESCRIBE
Set union, intersection and difference.
=ENDDOC
Spivey Ed 1. page 91.

=THDOC
req_thm(€"z_ﬁ_thm"›, ([],Òµ z: É; a: É∑
	z ç ﬁ a § (∂ S : É ∑ S ç a ± z ç S)Æ));
req_thm(€"z_•_thm"›, ([],Òµ z: É; a: É∑
	z ç • a § (µ S : É ∑ S ç a ¥ z ç S)Æ));
=DESCRIBE
Generalised set union and intersection.
=ENDDOC
Spivey Ed 1. page 92.
=DOC
val €z_Ä_conv› : CONV;
=DESCRIBE
Use $z\_Ä\_thm$ in combination with
knowledge about tuples.
Given as input an equality of the form $v\ Ä\ w$ then:

If $w$ is of type $ty$ $SET$ where $ty$ is not a tuple type:
=FRULE 1 Conversion
z_Ä_conv
Òv Ä wÆ
˜
˜
Ù (v Ä w) § 
	(µ xn : É ∑ xn ç v ¥ xn ç w)
=TEX
where $xn$ is the first variable in the list $x1$, $x2$,...
that doesn't appear in $v$ or $w$ (free or bound).

If $w$ is of type $ty$ $SET$ where $ty$ is an n-tuple type, or binding type, then sufficient $x_i$ will be introduced,
instead of just $xn$, to allow $xn$ to be replaced by a construct
of bindings and tuples of the $x_i$, such that no $x_i$ has a binding or tuple type and appears exactly once in the construct.
=EXAMPLE
z_Ä_conv Òp Ä r ∏ [a,b:X] ∏ x2Æ =
Ù p Ä r ∏ [a, b : X] ∏ x2
    § (µ x1 : É; x3 : É; x4 : É; x5 : É
      ∑ (x1, (a ¶ x3, b ¶ x4), x5) ç p
        ¥ (x1, (a ¶ x3, b ¶ x4), x5) ç r ∏ [a, b : X] ∏ x2)
=TEX
Notice how the introduced universal quantification ``skips''
$x2$ which is present in the input term.
=SEEALSO
$z\_Ä\_thm$, $z\_ç\_\_conv$.
=FAILURE
78001	?0 is not of the form Òv Ä wÆ
=ENDDOC
=THDOC
req_thm(€"z_¿_clauses"›,([], Ò
	µ a : É ∑
		(a ¿ {} = a)
	±	({} ¿ a = a)
	±	(a ¿ É = É)
	±	(É ¿ a = É)
	±	(a ¿ a = a)Æ));
=DESCRIBE
``$z\_¿\_clauses$'' provides simplifying clauses associated with ``$\$¿$''.
=ENDDOC
=THDOC
req_thm(€"z_°_clauses"›,([], Ò
	µ a : É ∑
		(a ° {} = {})
	±	({} ° a = {})
	±	(a ° É = a)
	±	(É ° a = a)
	±	(a ° a = a)Æ));
=DESCRIBE
``$z\_°\_clauses$'' provides simplifying clauses associated with ``$\$°$''.
=ENDDOC
=THDOC
req_thm(€"z_set_dif_clauses"›,([], Ò
	µ a : É∑
		(a \ {} = a)
	±	({} \ a = {})
	±	(a \ É = {})
	±	(a \ a = {})Æ));
=DESCRIBE
``$z\_set\_dif\_clauses$'' provides simplifying clauses associated with ``$\$\verb+\+$''.
=ENDDOC
=THDOC
req_thm(€"z_Ä_clauses"›,([], Ò
	µ a : É ∑
		(a Ä a)
	±	({} Ä a)
	±	(a Ä É)Æ));
=DESCRIBE
``$z\_Ä\_clauses$'' provides simplifying clauses associated with ``$\$Ä$''.
=ENDDOC
=THDOC
req_thm(€"z_†_clauses"›,([], Ò
	µ a : É ∑
		≥ (a † a)
	±	≥ (a † {})
	±	({} † É)Æ));
=DESCRIBE
``$z\_†\_clauses$'' provides simplifying clauses associated with ``$\$†$''.
=ENDDOC
=THDOC
req_thm("z_ﬁ_clauses",([], Ò
		(ﬁ {} = {})
	±	(ﬁ É = É)Æ));
=DESCRIBE
``$z\_ﬁ\_clauses$'' provides simplifying clauses associated with ``$\$ﬁ$''.
=ENDDOC
=THDOC
req_thm(€"z_•_clauses"›,([], Ò
		(• {} = É)
	±	(• É = {})Æ));
=DESCRIBE
``$z\_•\_clauses$'' provides simplifying clauses associated with ``$\$•$''.
=ENDDOC
=THDOC
req_thm(€"z__clauses"›,([], Ò
	µ a : É ∑
		( {} = {{}})
	±	( É = É)
	±	a ç  a
	±	{} ç  aÆ));
=DESCRIBE
``$z\_\_clauses$'' provides simplifying clauses associated with ``$\$$''.
=ENDDOC
=THDOC
req_thm(€"z_â1_clauses"›,([], Ò
	µ a : É ∑
		(â1 {} = {})
	±	(a ç â1 a § a Ω {})
	±	≥({} ç â1 a)Æ));
=DESCRIBE
``$z\_â1\_clauses$'' provides simplifying clauses associated with ``$\$â1$''.
=ENDDOC
=THDOC
req_thm(€"z_∏_clauses"›,([], Ò
	µ a : É ∑
		(a ∏ {} = {})
	±	({} ∏ a = {})
	±	(É ∏ É = É)Æ));
=DESCRIBE
``$z\_∏\_clauses$'' provides simplifying clauses associated with ``$\$∏$''.
=ENDDOC
=THDOC
req_thm(€"z_sets_ext_clauses"›,([], Ò
	µ s,t : É ∑
	((s = t) § (µ x : É ∑ x ç s § x ç t))
	±
	((s Ä t) § (µ x : É ∑ x ç s ¥ x ç t))
	±
	((s † t) § ((µ x : É ∑ x ç s ¥ x ç t) ± (∂ y : É ∑ y ç t ± ≥(y ç s))))
	Æ));
=DESCRIBE
These are the three basic extensionality results for Z set theory.
It is better to use the facilities in the proof contexts
``$'z\_sets\_ext\_lib$'' and ``$'z\_sets\_ext\_lang$'' 
rather than use these for rewriting, and the proof context material
will introduce``good''  unique variable names, rather than repeatedly prime $x$.
=ENDDOC
=DOC
val €z_seta_false_conv› : CONV;
=DESCRIBE
Simplifies a Z set abstraction whose predicate is false. 
=FRULE 1 Conversion
z_seta_false_conv
Ò{ D | false ∑ P}Æ
˜
˜
Ù{ D | false ∑ P} = {}
=TEX
=FAILURE
78002	?0 is not of the form: Ò{D | false ∑ P}Æ
=ENDDOC

\section{THEOREMS IN SIGNATURE}
=DOC
val z_Ω_thm: THM;
val z_é_thm: THM;
val z_ö_thm: THM;
val z_Ä_thm: THM;
val z_Ä_thm1: THM;
val z_†_thm: THM;
val z_ç__thm: THM;
val z_â1_thm: THM;
val z_¿_thm: THM;
val z_°_thm: THM;
val z_set_dif_thm: THM;
val z_ﬁ_thm: THM;
val z_•_thm: THM;
val z_first_thm: THM;
val z_second_thm: THM;
val z_¿_clauses: THM;
val z_°_clauses: THM;
val z_set_dif_clauses: THM;
val z_Ä_clauses: THM;
val z_†_clauses: THM;
val z_ﬁ_clauses: THM;
val z_•_clauses: THM;
val z__clauses: THM;
val z_â1_clauses: THM;
val z_∏_clauses: THM;
val z_sets_ext_clauses: THM;
=DESCRIBE
These are the ML bindings of the theorems of the theory $z\_sets$.
=ENDDOC

=DOC
val €z_Ω_def› : THM;
val €z_é_def› : THM;
val €z_ö_def› : THM;
val €z_†_def› : THM;
val €z_â1_def› : THM;
val €z_¿_def› : THM;
val €z_°_def› : THM;
val €z_setdif_def› : THM;
val €z_ﬁ_def› : THM;
val €z_•_def› : THM;
val €z_first_def› : THM;
val €z_second_def› : THM;
val €z_∫_def› : THM;
val €z'ê_def› : THM;
val €z_™_def› : THM;
val €z_≠_def› : THM;
=DESCRIBE
These are the ML bindings of the definitions of the theory $z\_sets$.
=ENDDOC
\section{PROOF CONTEXTS}
We provide the following proof contexts to reason about the above:

\begin{tabular}{l p{4in}}
$'z\_ç\_set\_lib$ & Simple algebraic reasoning about set theory of the Z library, especially $ç$. (e.g. $¿$) \\
$'z\_sets\_ext\_lib$ & Extensional reasoning about set theory (e.g. $°$) \\
$'z\_normal$ & normalisation of $Ω$, $é$, $ö$ and $x\ ç\ \ y$. \\
\end{tabular}
=DOC
(* Proof Context: €'z_ç_set_lib› *)
=DESCRIBE
A component proof context for handling the membership of expressions created by Z set operations of the Z library.

Predicates and expressions treated by this proof context are constructs formed from:
=GFT
•, ﬁ, °, ¿, \, â1, ö
=TEX
\paragraph{Contents}\ 

Rewriting:
=GFT
=TEX

Stripping theorems:
=GFT
=TEX

Stripping conclusions:
=GFT
=TEX
All three of the above have theorems concerning the membership ($ç$) of terms generated by the following operators:
=GFT
•, ﬁ, °, ¿, \, â1, ö
=TEX
Stripping also contains the above in negated forms.

Rewriting canonicalisation:
=GFT
=TEX
$É$ simplification has the definition of $™$ added.

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_set\-\_theory$.
It is intended to be used with proof context ``$'$z$\-\_$set$\-\_$lang'' and ``$'$z$\-\_$normal''
It is not intended to be mixed with HOL proof contexts.
=SEEALSO
$'z\_sets\_ext\_lib$
=ENDDOC
=DOC
(* Proof Context: €'z_normal› *)
=DESCRIBE
A component proof context for normalising certain constructs of the Z library.
The normalisation is done to fix on, in each case, one of two
possible equivalent representations of the same concept.
These constructs are:
=GFT
x Ω y    normalised to ≥(x = y)
x é y    normalised to ≥(x ç y)
ö        normalised to {}
x ç  y  normalised to x Ä y
=TEX
\paragraph{Contents}\ 

Rewriting:
=GFT
z_ç__thm, z_ö_thm1, z_é_thm, z_Ω_thm
=TEX

Stripping theorems:
=GFT
z_ç__thm, z_ö_thm, z_é_thm, z_Ω_thm,
and these all pushed through ≥
=TEX

Stripping conclusions:
=GFT
z_ç__thm, z_ö_thm, z_é_thm, z_Ω_thm,
and these all pushed through ≥
=TEX

Rewriting canonicalisation:
=GFT
=TEX
$É$ simplification has the definition of $™$ added.

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_set\-\_theory$.
It is intended to be used with proof contexts ``$'$z$\-\_$set$\_$lib'' or ``$'$z$\-\_$set$\_$alg''.
=ENDDOC
Strictly $z\_Ω\_thm$ is a Z library predicate operator,
rather than a set operator.

$z\_ç\_\_thm$ is included as this seems the best non-extensional rule for $$, given $Ä$ is available.

=DOC
(* Proof Context: €'z_sets_alg› *)
=DESCRIBE
A component proof context for handling algebraic reasoning of expressions created by Z set operations of the Z library.

Predicates and expressions treated by this proof context are constructs formed from:
=GFT
ç, °, ¿, \, Ä, †, •, ﬁ, , â1, {D | false ∑ V}, ∏
=TEX
\paragraph{Contents}\ 

Rewriting:
=GFT
z_¿_clauses, z_°_clauses, z_set_dif_clauses,
z_Ä_clauses, z_†_clauses, z_ﬁ_clauses, z_•_clauses, 
z__clauses, z_â1_clauses, z_seta_false_conv,
z_∏_clauses
=TEX

Stripping theorems:
=GFT
z_¿_clauses, z_°_clauses, z_set_dif_clauses,
z_Ä_clauses, z_†_clauses, z_ﬁ_clauses, z_•_clauses, 
z__clauses, z_â1_clauses, z_seta_false_conv,
z_∏_clauses
as necessary converted to membership statements by ç_C,
And all of this pushed through ≥
=TEX
Stripping conclusions:
=GFT
z_¿_clauses, z_°_clauses, z_set_dif_clauses,
z_Ä_clauses, z_†_clauses, z_ﬁ_clauses, z_•_clauses, 
z__clauses, z_â1_clauses, z_seta_false_conv,
z_∏_clauses
as necessary converted to membership statements by ç_C,
And all of this pushed through ≥
=TEX

Rewriting canonicalisation:
=GFT
=TEX

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_set\-\_theory$.
It is intended to usable with proof context ``$'$z$\-\_ç\-\_$set$\-\_$lib'', and always with ``$'$z$\-\_$normal''.
The proof context ensures that its simplifications will
be attempted before more general rules concerned membership
of set operators are used.

It is not intended to be mixed with HOL proof contexts.
=ENDDOC
=DOC
(* Proof Context: €'z_sets_ext_lib› *)
=DESCRIBE
An aggressive component proof context for handling the manipulation of Z set expressions, by breaking them into predicate calculus, within the Z library.

Predicates treated by this proof context are constructs formed from:
=GFT
Ä, †
=TEX
\paragraph{Contents}\ 

Rewriting:
=GFT
z_Ä_conv, z_†_thm, z_setd_Ä_conv
=TEX

Stripping theorems:
=GFT
z_Ä_conv, z_†_thm, z_setd_Ä_conv,
plus these all pushed in through ≥
=TEX

Stripping conclusions:
=GFT
z_Ä_conv, z_†_thm, z_setd_Ä_conv,
plus these all pushed in through ≥
=TEX
In all of the above $z\_setd\_Ä\_conv$, which does the conversion:
=GFT
{x1,x2,...} Ä y ---> x1 ç y ± x2 ç y ± ...
=TEX
is used, where applicable, in preference to $z\_Ä\_conv$, which, in the simplest cases, does the conversion:
=GFT
p Ä q ---> µ x1 ∑ x1 ç p ¥ xx1 ç q
=TEX

Rewriting canonicalisation:
=GFT
=TEX

Automatic proof procedures are respectively $z\-\_basic\-\_prove\-\_tac$,
$z\-\_basic\-\_prove\-\_conv$,
and
no existence prover.
\paragraph{Usage Notes}
It requires theory $z\-\_set\-\_theory$.
It is intended to always be used in conjunction with ``$'$z$\-\_$set$\-\_$lib'' and ``$'$z$\-\_$set$\-\_$ext$\-\_$lang''.
If used with ``$'$z$\_$sets$\_$alg'' then the simplification
in that proof context will take precedence over the 
extensionality effects of this proof context.

It is not intended to be mixed with HOL proof contexts.
=SEEALSO
$'z\_ç\_set\_lib$
=ENDDOC
Notice that there is an overlap of sorts in stripping with ``$'$z$\_ç\_$set$\_$lib'' - the simplifications would usually 
be discovered without these additions to the above proof context, but perhaps not as fast.

\section{EPILOGUE}
=SML
end (* end of signature ZSets *);
=TEX
=SML
reset_flag ("z_type_check_only");
reset_flag ("z_use_axioms");
=TEX

\section{TEST POLICY}
The module tests for this module are to follow the guidelines
laid down in the quality plan~\cite{DS/FMU/IED/PLN008}.

\twocolumn[\section{INDEX}]
\small
\printindex

\end{document}
