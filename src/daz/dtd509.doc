%  dtd509.doc %Z% $Date$ $Revision$ $RCSfile$
=TEX
% TQtemplate.tex
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{DAZ PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Detailed Design: Z Toolkit Extensions}  %% Mandatory field
\TPPref{ISS/HAT/DAZ/DTD509}  %% Mandatory field
\def\SCCSversion{$Revision$%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}
%\TPPstatus{Approved}
\TPPstatus{Draft}
\TPPtype{Specification}
\TPPkeywords{SPARK}
\TPPauthor{D.J.~King&WIN01}
\TPPauthorisation{R.B.~Jones & HAT Manager}
\TPPabstract{
This document contains the detailed design for the
DAZ paragraph processor.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
	Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}

\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{daz,fmu}

\subsection{Changes History}  % to get section number `0.3'
\begin{description}
\item[Issue \SCCSversion~\FormatDate{$Date$%
}) ] Initial Draft.

\end{description}
\subsection{Changes Forecast}
\section{GENERAL}
\subsection{Scope}
This document contains the detailed design for the Web Clause Processor.

\subsection{Introduction}

\subsubsection{Purpose and Background}


\subsubsection{Dependencies}
%\subsubsection{Possible Enhancements}
\subsubsection{Deficiencies}
None known.

\section{DESIGN ISSUES}

\section{PREAMBLE}

=SMLZ
open_theory"z_library";
push_pc "z_library";
delete_theory"daz_toolkit_extensions" handle Fail _ => ();
val _ = set_flag ("z_type_check_only", false);
val _ = set_flag ("z_use_axioms", true);
new_theory"daz_toolkit_extensions";
=TEX
\section {DEFINITION OF FIXITY}

¹Z
fun  not _
°

¹Z
fun 0 _ and _, _ or _, _ xor _
°
¹Z
fun 1 _ mem _, _ notmem _, _ eq _, _ noteq _
°

¹Z
fun 2 _ less _, _ less_eq _, _ greater _, _ greater_eq _
°

¹Z
fun 4 _ intdiv _, _ rem _
°

¹Z
fun 5 _ ** _
°

abs already exists in the Z theory of numbers -- so we have to use a new name...
Would DRA like us to use our own definition?

¹Z
fun  Abs _
°

=TEX

\section{TOOLKIT EXTENSIONS}

\subsection{Booleans}

¹Z
ÛFALSEİ ¦ 0
°

¹Z
ÛTRUEİ ¦ 1
°

¹Z
ÛBOOLEANİ ¦ FALSE..TRUE
°

¹Z
ÛBOOLEAN_FIRSTİ ¦ FALSE
°

¹Z
ÛBOOLEAN_LASTİ ¦ TRUE
°

¹Z
ÛBOOLEAN_SUCCİ ¦ (BOOLEAN \ {BOOLEAN_LAST}) ò succ
°

¹Z
ÛBOOLEAN_PREDİ ¦ BOOLEAN_SUCCç~ê
°

¹Z
ÛBOOLEAN_POSİ ¦ id BOOLEAN
°

¹Z
ÛBOOLEAN_VALİ ¦ BOOLEAN_POSç~ê
°

\subsection{Boolean Operators}

¹ZAX
Ü Ûnotİ _ : BOOLEAN ­ BOOLEAN;
Ü _ Ûandİ _, _ Ûorİ _, _ Ûxorİ _ : (BOOLEAN ¸ BOOLEAN) ­ BOOLEAN
÷üüüüüüüüüüüüüüüüüüüüü
Ü µ b : BOOLEAN ·
Ü	not FALSE = TRUE ± not TRUE = FALSE ±
Ü	(b and FALSE = FALSE ± b and TRUE = b) ±
Ü	(b or FALSE = b ± b or TRUE = TRUE) ±
Ü	(b xor FALSE = b ± b xor TRUE = not b)
°



\subsection{Relational Operators returning Booleans}

[X]œœœœœœœœœœœœœœœœ
Ü _ Ûmemİ _, _ Ûnotmemİ _ : (X ¸ ğ X) ­ BOOLEAN;
Ü _ Ûeqİ _, _ Ûnoteqİ _ : (X ¸ X) ­ BOOLEAN
÷üüüüüüüüüüüüüüüüüü
Ü µ x, y : X; S : ğ X; b : BOOLEAN ·
Ü	(b = x mem S ¤ (b = TRUE ¤ x  S)) ±
Ü	(b = x notmem S ¤ (b = TRUE ¤ x  S)) ±
Ü	(b = x eq y ¤ (b = TRUE ¤ x = y)) ±
Ü	(b = x noteq y ¤ (b = TRUE ¤ x ½ y))
ˆüüüüüüüüüüüüüüüüüüüü


¹ZAX
Ü _ Ûlessİ _, _ Ûless_eqİ _, _ Ûgreaterİ _,
Ü _ Ûgreater_eqİ _ : (ú ¸ ú) ­ BOOLEAN
÷üüüüüüüüüüüüüüüüüüüüü
Ü µ x, y : ú; b : BOOLEAN ·
Ü	(b = x less y ¤ (b = TRUE ¤ x < y)) ±
Ü	(b = x less_eq y ¤ (b = TRUE ¤ x ¼ y)) ±
Ü	(b = x greater y ¤ (b = TRUE ¤ x > y)) ±
Ü	(b = x greater_eq y ¤ (b = TRUE ¤ x ¾ y))
°

\subsection{Numeric Operators}

¹ZAX
Ü _ Ûintdivİ _, _ Ûremİ _ : (ú ¸ ú \ {0}) ­ ú
÷üüüüüüüüüüüüüüüüüüüüü
Ü µ x, y : ú | y ½ 0 ·
Ü	(x * y ¾ 0 ² x mod y = 0 ´ x intdiv y = x div y) ±
Ü	(x * y < 0 ± x mod y ½ 0 ´ x intdiv y = x div y + 1) ±
Ü	x intdiv y * y + x rem y = x
°

¹ZAX
Ü _ Û**İ _ : (ú ¸ î) ­ ú
÷üüüüüüüüüüüüüüüüüüüüü
Ü µ x : ú; y : î · x ** 0 = 1 ± x ** (y + 1) = x * x ** y
°

¹ZAX
Ü Abs _ : ú ­ î
÷üüüüüüüüüüüüüüüüüüüüü
Ü µ x : ú · x ¾ 0 ´ Abs x = x ± x < 0 ´ Abs x = ~x
°

\subsection{Integers}

¹ZAX
Ü INTEGER : ğ ú
°
¹ZAX
Ü INTEGERvFIRST, INTEGERvLAST : ú
°

¹ZAX
Ü INTEGERvSUCC, INTEGERvPRED, INTEGERvPOS,
Ü INTEGERvVAL : ú ß ú
°

\section{START OF STRUCTURE}
=DOC
signature ÛDAZToolkitExtensionsİ = sig
=DESCRIBE
This provides the Z library sets material.
It creates the theory $z\_sets$.
=ENDDOC
=THDOC
req_name Û"daz_toolkit_extensions"İ (Value "z_library");
req_language "Z";
set_flag("tc_thms_only",true);
=DESCRIBE
The theory $daz\_toolkit\_extensions$ contains definitions specified in \cite{DRA/CIS/CSE3/SWI/WP/6/2}.
It is created in structure $DAZToolkitExtensions$.
=ENDDOC

\section{EPILOGUE}
=SML
end (* end of signature DAZToolkitExtensions *);
=TEX
=SML
reset_flag ("z_type_check_only");
reset_flag ("z_use_axioms");
=TEX


=TEX
\section{TEST POLICY}
The functions in this document are to be tested according to the
criteria identified in \cite{ISS/HAT/DAZ/PLN003}.

\small
\twocolumn[\section{INDEX}]
\printindex

\end{document}



