=TEX
% usr502.doc @(#) %Z% $Date$ $Revision$ $RCSfile$
% COPYRIGHT (c) International Computers Limited, 1993, 94
\def\SCCSissue{$Revision$%
}
\def\ignore#1{}
\documentstyle[11pt,hol1,fleqn,USR]{book}
% temporary measure while waiting for LaTeXe to come along
\def\LaTeXe{\LaTeX$2_{\varepsilon}$}
% Set the following macros as necessary as release
% numbers change.
\def\release{0.5}
\def\dazrelease{0.1}
\def\texrelease{\TeX\ version 3.1415}
\def\latexrelease{\LaTeXe}
\def\arch{sun4}
\def\solarisrelease{Solaris 2.3}
\def\motifrelease{Motif 1.2}
\def\polyrelease{Poly/ML 2.07MX}
\def\quicktexloc{{\tt /QLaTeX}} % NB one location needs this hard wired in
\def\daztool{{\Product}-DAZ}
% just useful macros
\def\ltm{$^{\rm TM}$}
=IGN
\TPPproject{DAZ PROJECT}
\TPPtitle{Installation Guide}
\TPPref{DS/FMU/IED/USR502}
\def\SCCSissue{$Revision$%
}
\TPPissue{\SCCSissue}
\TPPdate{\FormatDate{$Date$%
}}
%\TPPstatus{Approved}
\TPPstatus{Draft}
\TPPtype{Compliance Tool Installation and Operation}
\TPPkeywords{}
% \TPPauthors{R.D.~Arthan&WIN01\\A.J.~Hammon&WIN01}
\TPPauthor{D.J.~King&WIN01}
\TPPauthorisation{R.D.~Arthan&HAT Team
}
\TPPabstract{This document describes the contents of release \release{} of the Compliance Tool, and how to install this.}
\TPPdistribution{\begin{tabular}{l}
Library\\
\end{tabular}
}
=TEX
\ftlmargin 0.5in
\ftrmargin 0.5in

\def\SCCSversion{$Revision$%
}
\def\SCCSdate{\FormatDate{$Date$%
}}

\USRmanual{Compliance Tool Installation and Operation}
\USRref{USR502}

\raggedbottom
\ftlinepenalty=9999
\makeindex

\begin{document}

\makeUSRfrontpage

\underscoreoff

% Lines starting `%..' are temporarily commented out.  They may need to be
% reinstated.

%\def\etc{{\it etc.}}
%\def\eg{{\it e.g.}}
%\def\Eg{{\it E.g.}}
%\def\ie{{\it i.e.}}
%\def\Ie{{\it I.e.}}

\chapter*{CONTENTS}

\tableofcontents
\listoftables

\pagebreak

\setcounter{chapter}{-1}

\chapter{ABOUT THIS PUBLICATION} \label{intro}
\section{Purpose}

This document describes the contents of the Compliance Tool (or {\daztool}) release {\dazrelease}, and provides instructions for its installation and subsequent use.

\section{Readership}

The document is intended to be read by systems administrators before installing {\daztool}. Chapter \ref{USAGE} is intended to be read by novice users of the {\daztool}. 

\section{Related Publications}

A bibliography is given at the end of this document.

\begin{itemize}

\item
An overview design of the of the {\daztool} product can be found in \cite{ISS/HAT/DAZ/HLD501}.

A description of \Product{} may be found in:

{\em \ {\SOFTSERV}},

which also contains a full list of other \Product{} documentation.

\item
A list of known problems with \Product{} may be found in:

{\em \ {\PROBOPS}}.
\end{itemize}

\section{Prerequisites}

Familiarity with Compliance Notation specified in \cite{DRA/CIS/CSE3/TR/94/27/1.0} is essential. Familiarity with {\Product} is highly desirable.

\section{Acknowledgements}
=IGN
The below are taken from Motif 1.2 Users Guide, July 1993
=TEX
Sun Microsystems is a registered trademark of Sun Microsystems Inc.  Sun-3, OpenWindows, Sun-4, SPARCstation, SunOS and Solaris are trademarks of Sun Microsystems Inc.

Motif is a registered trademark of the Open Software Foundation, Inc.

UNIX is a registered trademark of UNIX System Laboratories, Inc.

Poly/ML is an implementation of Standard ML with a few non-standard extensions.  Poly/ML, and its documentation, is copyright Abstract Hardware Limited.  

\TeX{} is copyright of the American Mathematical Society and by Donald E. Knuth.
The \LaTeXe\ distribution tape is copyright the \LaTeX\ 3 project and its individual
authors.

X Window System is a trademark and product of the Massachusetts Institute of Technology.

GCC (Gnu C Compiler) is copyright the Free Software Foundation, Inc.
\Product{} is a trademark of International Computers Ltd.
=IGN
\subsection{Changes History}
\begin{description}
\item[Issue 1.1 (\FormatDate{94/08/26})] First approved issue.
\end{description}
=TEX
\section{Changes Forecast}
Future issues of this document will describe subsequent releases
of {\daztool}.

=TEX

\chapter{INTRODUCTION}

This document is a supplement to the guide entitled ``{\Product} Installation and Operation'' \cite{DS/FMU/IED/USR007}. The {\daztool} software is provided with your release of {\Product}. The installation of {\daztool} requires that you have already completed the installation of {\Product}.

To perform the installation and testing of {\daztool}, turn to chapter \ref{INSTALL}.

\section{Contents of This Document}

Chapter \ref{RELCONTENT} describes the contents of the release tape.

Chapter \ref{INSTALL} describes the installation of the {\daztool} software.

Section \ref{INSTALLTEST} describes the installation confidence test.

Chapter \ref{USAGE} describes how to get started with the {\daztool} software.

Chapter \ref{LIMITATIONS} describes the limitations of the {\daztool} software in the current release.


\chapter{RELEASE CONTENTS}
\label{RELCONTENT}

The {\daztool} software is overlaid on the directory structure of {\Product}. This section describes the files in the {\Product} directory structure that are specific to {\daztool}.

The tape which was used to load {\Product} already contains the {\daztool} software and documentation. There is no need to load in any further software from tape -- it is already present in your installation.

The following sections describe the files in the directory structure which are specific to {\daztool}.

\section{Installation Directory}


The installation directory is the same as the installation directory used when installing {\Product}. This is set by the PPINSTALLDIR shell variable. There are no specific {\daztool} files in this directory. The {\daztool} software and documentation actually resides in subdirectories of \$PPINSTALLDIR.


\section{Binaries Directory}\label{BINDIR}

The directory $\$PPINSTALLDIR/\arch bin$ contains the {\daztool} database. When {\Product} is invoked with this database, the Compliance Tool facilities are available. 

\begin{table}[p]
\begin{center}

\def\LAB#1{\begin{tabular}[t]{@{}l@{}}#1\end{tabular}}

\begin{tabular}{|l|p{4in}|}\hline
Name & Description \\\hline\hline
\LAB{{\tt ./\arch bin/\arch pp_daz.db}}
	&
This files is the master \Product{} databases for the \ProductHOL\ and
\ProductZ. \\\hline
\LAB{{\tt ./\arch bin/\arch sieveview}}
	&
This is a sieveview file which is customized for {\daztool}. It differs from the {\Product} or {\ProductZ} sieve steering file in that it has additional entries for dealing with Compliance Notation.
It replaces the file of the same name set up when {\Product} is installed.
 \\\hline
\end{tabular}

\end{center}
\caption{Contents of the Binaries Directory\label{BINDIRTAB}}
\end{table}

\section{DAZ Documentation Directory}\label{DAZDOCSDIR}
The directory {\tt ./dazdocs} contains the design documentation of the {\daztool}. An example Compliance Notation script is also provided and constitutes the basis for confidence testing of your configuration.

\begin{table}[p]
\begin{center}

\def\LAB#1{\begin{tabular}[t]{@{}l@{}}#1\end{tabular}}

\begin{tabular}{|l|p{4in}|}\hline
Name & Description \\\hline\hline
\LAB{{\tt ./dazdocs/dtd502.doc}\\
	{\tt ./dazdocs/dtd502.dvi}\\
	{\tt ./dazdocs/dtd505.doc}\\
	{\tt ./dazdocs/dtd505.dvi}\\
	{\tt ./dazdocs/dtd507.doc}\\
	{\tt ./dazdocs/dtd507.dvi}\\
	{\tt ./dazdocs/dtd508.doc}\\
	{\tt ./dazdocs/dtd508.dvi}\\
	{\tt ./dazdocs/dtd509.doc}\\
	{\tt ./dazdocs/dtd509.dvi}\\
	{\tt ./dazdocs/dtd513.doc}\\
	{\tt ./dazdocs/dtd513.dvi}\\
	{\tt ./dazdocs/dtd514.doc}\\
	{\tt ./dazdocs/dtd514.dvi}}
	&
These documents comprise the critical design of the Compliance Tool.\\\hline
\LAB{{\tt ./dazdocs/imp505.doc}\\
	{\tt ./dazdocs/imp505.dvi}\\
	{\tt ./dazdocs/imp507.doc}\\
	{\tt ./dazdocs/imp507.dvi}\\
	{\tt ./dazdocs/imp508.doc}\\
	{\tt ./dazdocs/imp508.dvi}}
	&
These documents comprise the implementation of the critical parts of the Compliance Tool.\\\hline
\LAB{{\tt ./dazdocs/dtd501.doc}\\
	{\tt ./dazdocs/dtd501.dvi}\\
	{\tt ./dazdocs/dtd503.doc}\\
	{\tt ./dazdocs/dtd503.dvi}\\
	{\tt ./dazdocs/dtd504.doc}\\
	{\tt ./dazdocs/dtd504.dvi}\\
	{\tt ./dazdocs/dtd510.doc}\\
	{\tt ./dazdocs/dtd510.dvi}\\
	{\tt ./dazdocs/dtd511.doc}\\
	{\tt ./dazdocs/dtd511.dvi}\\
	{\tt ./dazdocs/dtd512.doc}\\
	{\tt ./dazdocs/dtd512.dvi}}
	&
These documents comprise the design of important functional aspects of {\daztool} which are not part of the critical system. 
\\\hline
\LAB{{\tt ./dazdocs/hld501.doc}\\
	{\tt ./dazdocs/hld501.dvi}\\
	{\tt ./dazdocs/hld503.doc}\\
	{\tt ./dazdocs/hld503.dvi}\\
	{\tt ./dazdocs/usr502.dvi}}
	&
These documents comprise the high level design and user documentation for {\daztool}.\\\hline
\LAB{{\tt ./dazdocs/wrk001.doc}\\
	{\tt ./dazdocs/wrk001.dvi}\\
	{\tt ./dazdocs/wrk001.sml}}
	&
This is the ``1000 Primes Example'' provided by DRA in DRA/CIS/CSE3/SWI/WP/5/2 and adapted to work with {\daztool}.
\\\hline
\end{tabular}

\end{center}
\caption{Contents of the DAZ Documentation Directory\label{DAZDOCSDIRTAB}}
\end{table}


\chapter{INSTALLATION}\label{INSTALL}

In the following steps, it is assumed that you are running X/Motif window manager and that your default shell is the $Bourne$ shell (or one of its derivatives).

\begin{enumerate}
\item
The only installation step required is to create a working {\daztool} database. Login as the user which you used to install {\Product} and check that the shell variable PPINSTALLDIR is set to the location of your {\Product} installation. Then in a command tool, type the following commands.

\begin{verbatim}
cd $PPINSTALLDIR/sun4bin
pp_make_database -p pp_daz daz
\end{verbatim}


\end{enumerate}

\section{Running the Confidence Tests}\label{INSTALLTEST}

The following procedure constitutes the installation confidence test for {\daztool}.


\begin{enumerate}

\item
Initially, in the installation directory, create a test directory and copy in an example literate script by typing the following:

\begin{verbatim}
mkdir daztest
cd daztest
cp ../dazdocs/wrk001.sml .
\end{verbatim}

\item
To get started, create a {\daztool} database and start up $xpp$ running a session of {\daztool} on that database by typing the following into a command tool or $xterm$.

\begin{verbatim}
pp_make_database -p pp_daz dazinst
xpp -command pp -d dazinst &
\end{verbatim}


\item
You should now have a {\daztool} session running in the journal area of {\tt xpp}, displaying a banner giving start-of-session information, licensing information and the release number, followed by the {\daztool} prompt: ``{\tt :>}''. (The session may take a minute or so to get started.)

Start up a command line tool in {\tt xpp}, from its {\tt Tools} menu.

In the command line tool text area type:

\begin{verbatim}
use_file "wrk001";
\end{verbatim}
and hit the execute button.
This will process the literate script in the file $wrk001.sml$ which is the ``1000 Primes Example''.

The loading of the file should run to completion without error, which takes no longer than 5 minutes on a SPARCstation 1+.

\item

To print the SPARK program which is derived from this literate script, in the command line tool text area type:

\begin{verbatim}
print_spark_program();
\end{verbatim}
and hit the execute button.
This will display the SPARK program on the screen.

\item
To write the SPARK program to a file, in the command line type

\begin{verbatim}
output_spark_program1{out_file="wrk001.ada"};
\end{verbatim}
and hit the execute button.
Using the $xpp$ File menu, you may load the file $wrk001.ada$ and have a look at the generated program.

\item
Generate the Z document from the literate script; to do this use the command line tool again and type into its text area the following command:

\begin{verbatim}
output_z_document{theory="-", out_file="wrk001.zdoc"};
\end{verbatim}
and hit the execute button.
Using the $xpp$ File menu, you may load the file $wrk001.zdoc$ and have a look at the generated Z document.

\item
Now load the Z document you have just generated back into {\daztool}. From the $xpp$ Edit menu, restart the tool, and when the pop-up window asks for confirmation, hit the $OK$ button.

Next, bring up the command line tool, and type into it the following line:
\begin{verbatim}
use_file"wrk001.zdoc";
\end{verbatim}
and hit the execute button.

This will process the Z document in the file $wrk001.zdoc$ which we have just generated.

The loading of the file should run to completion without error.

\end{enumerate}

This completes the confidence tests and you may wish to delete the directory $daztest$ and its contents.

\chapter{NOTES ON GETTING STARTED}\label{USAGE}

\section{Invoking the Tool}\label{INVOKE}

The tool can be invoked by typing the following line into a command tool (e.g., $xterm$).
\begin{verbatim}
xpp -command pp -d daz &
\end{verbatim}

Using the tool is very similar to using {\ProductZ} and the reader is referred to {\ProductZ} user documentation.

\section{Trying an Example}

You may wish to try the ``1000 Primes Example'' to see how a literate script for {\daztool} looks and how the tool behaves when the script is entered. If so, try the following.

\begin{enumerate}
\item
Invoke the tool as described in section \ref{INVOKE}.

\item
Using the File menu, load the file $wrk001.doc$ which you will find in the $dazdocs$ directory.

\item
Using the xpp text selection facility and the execute command, load the formal text into the tool. The formal text includes Standard ML commands (which follow the =SML sieve directive), Z paragraphs, whose syntax is described in the Z user documentation of {\ProductZ}, and Compliance Notatation paragraphs.

In general Compliance Notation paragraphs are entered in documents using the paragraph introduction symbols, $¹CN$, at the beginning of a new line, and are terminated with the character $°$ on its own on a line.
The characters ¹, ° may be obtained from the palette of extended characters
or typed directly (as Meta+`(' and Meta+`)').

\item
When you have entered some of the script, you can try some of the commands documented in section \ref{REFERENCE} of this guide, and this will show you how the SPARK program and the Z document evolve during processing of the literate script.

\item
When you have done this, you may like to use the $wrk001.doc$ as a template for writing a new literate script. 

\end{enumerate}

\section{Reference Guide for Useful Commands}\label{REFERENCE}

=DOC
val Ûprint_spark_programÝ : unit -> unit
val Ûoutput_spark_programÝ : {out_file:string} -> unit
val Ûoutput_spark_program1Ý : {out_file:string} -> unit
=DESCRIBE
The function $print\_spark\_program$ generates and prints the SPARK program from the contents of the {\daztool} environment. The SPARK program is created by filling in the k-slots and specification statements in a literate script with their expansions and printing the output onto the screen in SPARK syntax such that it could be subsequently compiled using an Ada compiler.

$output\_spark\_program$ does the same as $print\_spark\_program$ but allows the user to specify a file to which the program will then be written. Note that it also inserts a sieve directive at the top of the program for incorporation into a document for processing with the {\Product} document processing system. 

$output\_spark\_program1$ outputs the SPARK program to a file without the sieve directive.   

=ENDDOC

=DOC
val Ûprint_z_documentÝ : {theory : string} -> unit
val Ûoutput_z_documentÝ : {out_file : string, theory : string} -> unit
=DESCRIBE
$print\_z\_document$ prints the contents of the theory denoted by $theory$ as a Z document and places the output onto the screen (in the $xpp$ journal).

$output\_z\_document$ writes the contents of a theory denoted by $theory$ to a file denoted by $out\_file$.
=USES
For example, if a literate script (containing only top level compilation units) has been entered into the {\daztool}  then the following command will output the corresponding Z document to a file called $foo.ada$.

\begin{verbatim}
output_z_document{out_file="foo.ada", theory="-"}
\end{verbatim}

If however, a literate script containing the specification and body of a package called $PACK$ then the following command might be used to generate the Z document.
\begin{verbatim}
output_z_document{out_file="pack.ada", theory="PACK__BODY"}
\end{verbatim}
=ENDDOC


\chapter{KNOWN LIMITATIONS}\label{LIMITATIONS}

The following is a list of known limitations with the current release of {\daztool}.

\begin{enumerate}
\item
When entering a literate script which introduces a package specification, it is necessary to introduce the package body prior to using the package specification in a with clause.
\item
The description of the functions $output_spark_program$ and $output_spark_program1$ in \\
ISS/HAT/DAZ/DTD511 is interchanged.
\item
The user documentation has not yet been supplied.
\item
Auxiliary Variables are not yet supported.
\item
Many of the checks (including checks for aliasing) are not yet made.
\item
Type conversions are not handled correctly in the abstract syntax -- they are currently handled as indexed arrays.
\item
Conjectures are not yet handled by the {\Product} theory software. This affects the representation of verification conditions (visible in a generated Z document).

\end{enumerate}

=IGN
\chapter{CHANGES IN RELEASE \release}\label{CHANGES}

Changes between two superseded releases are best commented
out by ``=IGN'' and judicious use of spaces at starts of lines.
This will aid their recovery if a ``long'' leap is required for some customer.

=TEX

\chapter*{REFERENCES}
\addcontentsline{toc}{chapter}{REFERENCES}

\bibliographystyle{fmu}
\bibliography{fmu,daz} 

%\twocolumn[\chapter*{INDEX}]
%\addcontentsline{toc}{chapter}{INDEX}
%\small
%\printindex
\end{document}
