=TEX
% TQtemplate.tex
\documentstyle[hol1,11pt,TQ,epsf]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Note#1{{\small\bf[ #1 ]}}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{DAZ PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Using the Compliance Tool}  %% Mandatory field
\TPPref{ISS/HAT/DAZ/USR501}  %% Mandatory field
\def\SCCSversion{$Revision$
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{Specification}
\TPPkeywords{HOL}
\TPPauthor{R.D.~Arthan & WIN01}  %% Mandatory field
\TPPauthorisation{D.J.~King & Project Manager}
\TPPabstract{
This document is the User Guide for the Compliance Tool
being produced for DRA under the DAZ project.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
      Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}
\newfont{\icllogo}{icllogo50}
\def\TPPheadlhs{$\vcenter{\halign{##\cr\icllogo ICL\cr}}$}
%\def\TPPheadcentre{}
%\def\TPPheadcentreproject{}
%\def\TPPheadrhs{}
\let\TPPfootlhs=\TPPfootrhs
\def\TPPfootcentre{$\vcenter{\halign{\hfil\strut##\hfil\cr
COPYRIGHT  \copyright\ ICL 1994\cr
COMMERCIAL IN CONFIDENCE\cr}}$}


\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\pagebreak
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu,daz}

\subsection{Changes History}
\begin{description}
\item[Issue \SCCSversion] First draft.
\end{description}

\subsection{Changes Forecast}
The current version of this document is a preliminary version.
It will be updated to a full user guide for the Compliance Tool as the design work progresses.

\pagebreak
\section{GENERAL}
\subsection{Scope}
This document is (a provisional and preliminary version of) the User Guide for the Compliance Tool.
It forms part of the response to the requirements for user documentation in \cite{ISS/HAT/DAZ/DEF501}.


\Note{Notes such as this one are used for comments about the likely content of the final User Guide. These notes will subsequently be removed.}

\subsection{Introduction}
Sections \ref{INTRO} to \ref{WINDOWLAYOUT} of this document constitute the User Guide for the Compliance Tool.

The User Guide is written on the assumption that the reader is familiar with Z and SPARK.
The reader is assumed to have access to a tool-independent description of the Compliance Notation such as is given in\cite{DRA/CIS/CSE3/SWI/n/1}.
The reader is also assumed to have access to the {\Product} user documentation, particularly the Z tutorial \cite{DS/FMU/IED/USR010}.
The {\Product} user documentation is supplied as part of the {\Product} release and is available for on-line reference.


Installation instructions are not given in this document.
The installation instructions for the Compliance Tool will be supplied as a brief supplement to the {\Product} Installation Guide \cite{DS/FMU/IED/USR007}.
Much material in this document is common with the {\Product} Motif interface currently under development.

\pagebreak
\section{INTRODUCTION TO THE COMPLIANCE TOOL}\label{INTRO}

The Compliance Tool supports a notation for demonstrating the compliance of Ada programs with Z specifications.
The Ada parts of the notation belong to the SPARK subset of Ada and will be referred to as SPARK in the rest of this document.
The Compliance Notation is described in \cite{DRA/CIS/CSE3/SWI/n/1}.

Compliance Notation is prepared and presented in literate scripts containing a mixture of narrative text, Z and SPARK.
Special notations are provided for two main purposes:

\begin{enumerate}
\item
to allow the SPARK program to be presented and documented in an order independent of that prescribed by the SPARK syntax (in a similar fashion to Knuth's Web system \cite{Knuth84a});
\item
to allow the behaviour of the SPARK code to be formally specified in Z (using a style based on Morgan's refinement calculus \cite{Morgan90}).
\end{enumerate}

The Compliance Tool described in this document is an application of the {\Product} specification and proof tool.
The Compliance Tool provides all the facilities offered by {\Product} for developing specifications and proofs and for preparing high quality printed output via the {\LaTeX} system.

The user interface to the tool described in this document is a Motif application (e.g. see \cite{sun92a}).

\Note{ In the final User guide it would be appropriate to describe enough of the essentials of the Motif look and feel for the user to make a start. }

\pagebreak
\section{GETTING STARTED}
\Note{ The tool is invoked by a single UNIX command which allows the user to specify standard X and Motif options together with any relevant {\Product} options (e.g., initialisation files, heap size etc.).
This command is much the same as the command which starts the {\Product} Motif interface (the only difference being in the choice of certain default values).
The command is provisionally referred to as {\tt az} in the rest of this document.}

{\tt az} creates a Motif window similar to the one shown in figure \ref{fig1}.
This is referred to as the {\Product} window.
This window lets the user create, view, and edit literate scripts.
It also lets the user check the SPARK and Z parts of the scripts using {\Product}.
The Z document or the SPARK program corresponding to the script can also be produced and filed.


\pagebreak
\section{WINDOW LAYOUT}\label{WINDOWLAYOUT}
This section describes the main elements of the {\Product} window.
In overview, the top part of the window acts as an editor for literate scripts.
Material from the editor can be transferred into the {\ProductML} system for processing (e.g. to type check a specification paragraph or initiate a proof step).
The journal of the transactions with {\ProductML} occupies the bottom part of the window.
Figure \ref{fig1} also shows a popup window (in this case a palette of special symbols).
The size and relative positioning of all the windows can be adjusted using standard Motif techniques.

\Note{The object languages supported by {\Product} are embedded in {\ProductML}, so the use of the term {\ProductML} above embraces {\ProductHOL}, {\ProductZ} and the Compliance Notation.}

\subsection{Menu Bar}

The menu bar is at the top of the window shown in figure \ref{fig1}.
The menus are all pulldown menus operated in the usual Motif fashion.
The functions they perform are described in sections \ref{FileMenu} to \ref{HelpMenu} below.

\subsubsection{File Menu}\label{FileMenu}
This menu is for common file operations including: loading and saving the literate script; creating a new literate script; deleting a file.

\subsubsection{Tools Menu}\label{ToolsMenu}
This menu is used to create popup windows to perform various tasks.
An example is the palette window shown in figure \ref{fig1}.

\Note{Other examples will include a control panel for running {\LaTeX} and stand-alone script editors so that the user can view and edit several scripts at once.}

\subsubsection{Edit Menu}\label{EditMenu}
This menu provides script editing operations: cut, copy and paste and undo.
\subsubsection{Command Menu}\label{CommandMenu}

This menu is primarily used to cause text from the script window to be executed by the {\ProductML} system.
It also provides various control functions for the {\ProductML} system.

\subsubsection{Help Menu}\label{HelpMenu}
This menu provides help on various topics.

\subsection{File Name}
This part of the window contains a read-only text field displaying the file name of the script being edited.

\subsection{Script Window}
This window is a standard Motif text window in which the literate script is edited.
In figure \ref{fig1}, part of this window is hidden behind a palette of symbols.
This palette has been selected from the Tools Menu and can be used to enter the symbols into the literate script.
Pushing one of the buttons on the palette causes the symbol to appear in the document as if it had been typed at  the keyboard.

\Note{Direct keyboard entry of the symbols is also possible if appropriate modifier keys are set up.}

\subsection{Journal Window}
When the user selects some text in the Script Window and actions ``execute'' from the Command Menu, the text and the resulting response from the {\ProductML} system are displayed in the Journal Window.
The Journal Window is a read-only text window.

\Note{ Figure \ref{fig1} shows what the window might look like while working through the  example in \cite{DRA/CIS/CSE3/SWI/WP/5/2}.
The user has recently selected the procedure ``{\tt primes}'' together
with the two mark-up lines which delimit fragments of compliance notation.
The procedure has been processed using the ``execute'' option and processed by {\ProductML} and the text which has been executed  appears in the Journal Window. In this case the ``execution' was to run an early version of the parser for Compliance Notation.
The value returned by this computation is displayed at the bottom of the Journal Window (as a depth-restricted print-out of an ML data structure representing a parser tree).
In the final tool, the Compliance Notation fragment would be type checked and used to update an internal representation of the literate script. }


\pagebreak
\section{COMPLIANCE NOTATION FUNCTIONS}

\Note{ In the basic version of the user interface, extraction of the Z document and the SPARK program will be invoked by execution of a Metalanguage command.
In the customised version these facilities will be available through the menus as will additional tool functionality. }

\epsfysize=100mm
\begin{figure}[p]
%\begin{center}
%\leavevmode
%\epsffile[0 0 752 822]{usr501.img.ps}
%\end{center}
\vspace {22cm}
\caption{An Example Compliance Tool Window}\label{fig1}
\end{figure}

\end{document}


