% %Z% $Date$ $Revision$ $RCSfile$
=TEX
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{DAZ PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Implementation: Web Clause Processor}  %% Mandatory field
\TPPref{ISS/HAT/DAZ/IMP504}  %% Mandatory field
\def\SCCSversion{$Revision$%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{Specification}
%\TPPkeywords{CN}
\TPPauthor{D.J.~King & WIN01}  %% Mandatory field
%\TPPauthors{Name 1&location 1\\Name 2&location 2\\Name 3&location 3}
\TPPauthorisation{R.D.~Arthan & HAT Team}
\TPPabstract{
This document contains the implementation for the compliance notation web clause processor.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
	Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}

\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu,daz}

\subsection{Changes History}  % to get section number `0.3'
\begin{description}

\item[Issue 1.1-1.10] Initial Drafts.
\item[Issue 1.11 (27th May 1994)] First draft for comment.

\end{description}
\subsection{Changes Forecast}
None.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains the implementation of the compliance notation web clause processor. It is written in response to the detailed design to be found in \cite{ISS/HAT/DAZ/DTD504}.
\subsection{Introduction}
\subsection{Purpose and Background}
See \cite{ISS/HAT/DAZ/DTD504}.

%\subsection{Algorithms}
%\subsection{Dependencies}
%\subsection{Known Deficencies}
\subsection{Possible Enhancements}
None.
=TEX
\section{THE STRUCTURE $WebClauses$}

=SML
structure ÛWebClausesÝ : WebClauses  = struct
local
	open CNTypes CNZGenerator;
in
=TEX
\section{INTERFACE}
The following function looks at the initial label in a web clause (if there is one). The label determines the kind of web clause entered. This classification function is called from within the lexical analyser, and it is necessary for it to be called prior to the parser since the parser recognises a language in which the distinction between the kinds of web clause is made in the parser's input.

=SML
fun Ûclassify_initial_labelÝ (itemlist : CN_LEX_ITEM list) : CN_LEX_ITEM list = (
	case itemlist of
	(LCOrd, _)::(LCNumericLiteral, CNText ntxt)::(LCCrd, _)::rest => (
		let	val labn = "(" ^ ntxt ^ ")";
		in
			((case classify_label labn of
					Value RSCompilation => LCCompLabel
				|	Value RSPrivatePart => LCPPartLabel
				|	Value RSVisiblePart => LCVPartLabel
				|	Value RSDeclaration => LCDecLabel
				|	Value RSStatement => LCStmtLabel
				|	Value RSSpecStatement => LCSpecLabel
				|	_ => LCCompLabel
			), CNText labn)::rest
		end
	)|_ => itemlist
);
=TEX

=SML
fun Ûcn_recogniserÝ (start:string, lang:string, value:Lex.INPUT list, finish:string) = (
	if	ReaderWriterSupport.PrettyNames.is_same_symbol(start, "¹")
	andalso	ReaderWriterSupport.PrettyNames.is_same_symbol(finish, "°")
	andalso	(lang = "CN")
	then
		let	val save_cn_parser_state = get_cn_parser_state();
		in
			(CNZGenerator.cn_z_generator
			o	CNParser.cn_parser
			o	CNLex.cn_lex classify_initial_label)
					value
			handle ex => (
				set_cn_parser_state save_cn_parser_state;
				raise ex
			)
		end
	else
		fail "cn_recogniser" 504010
			[fn () => start, fn () => lang, fn () => finish]
);
=TEX

\section{EPILOGUE}
=SML
end; (* local ... in *)
end (* of structure WebClauses *);
open WebClauses;
=TEX
\small
\twocolumn[\section{INDEX}]
\printindex
\end{document}
