% dtd025.doc   %Z% $Date$ $Revision$ $RCSfile$

=TEX
% dtd025.doc   %Z% $Date$ $Revision$ $RCSfile$
\documentstyle[hol,11pt,TQ]{article}

\TPPtitle{Detailed Design of Pretty Printer}
\TPPref{DS/FMU/IED/DTD025}
\def\SCCSissue{$Revision$%
}
\TPPissue{\SCCSissue}
\TPPdate{\FormatDate{$Date$%
}}
\TPPproject{FST PROJECT}

=IGN

Commands to process this document in various ways.

make -f rel001.mkf dtd025.dvi
doc4tex dtd025
tex4dvi dtd025
bibtex dtd025
doc4tex dtd025 ; tex4dvi dtd025
doc4tex dtd025 ; tex4dvi dtd025 ; bibtex dtd025
dvipage dtd025 &


doc4errors dtd025
usefile "dtd025.sml";

lasp -s dtd025.doc > zz1
lasp -s -u dtd025.OKwords dtd025.doc > zz1

=TEX
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{Standard}
\TPPkeywords{HOL}
\TPPauthor{A.J. Hammon & WIN01}  %% Mandatory field
\TPPauthorisation{R.B.~Jones & FMU Manager}
\TPPabstract{This document contains the user interface to
	the pretty printer.}
\TPPdistribution{\parbox[t]{4.0in}{%
	Library
}}

%\ftlinepenalty=9999
\makeindex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\catcode`\_=\active
\def\_{\kern.06em\vbox{\hrule height.1ex width.3em}\hskip0.1em\relax}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\makeTPPfrontpage

\vfill
\begin{center}
\bf Copyright \copyright\ : International Computers Ltd \number\year
\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\section{DOCUMENT CONTROL}

%********************************************************************

\subsection{Contents List}
\tableofcontents
% \listoftables

%********************************************************************

\subsection{Document Cross References}

\bibliographystyle{fmu}
\bibliography{fmu}

%********************************************************************

\subsection{Changes History}

\begin{description}

\item[4 June 1991, issue 1.2 ] Simple HOL only pretty printer for use
	during development of the rest of ICL HOL until the real pretty
	printer is available.

\item[\FormatDate{$Date$%
}, issue \SCCSissue~] First issue of the real pretty printer.

\end{description}

%********************************************************************

\subsection{Changes Forecast} \label{ChangesForecast}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{GENERAL}

%********************************************************************

\subsection{Scope}

This document contains the pretty printer for the ICL HOL system.  The
high-level design for this document in~\cite{DS/FMU/IED/HLD008}.

%********************************************************************

\subsection{Introduction}

The desired attributes of the pretty printer subsystem are defined
in~\cite{DS/FMU/IED/HLD002} and further elaborated
in~\cite{DS/FMU/IED/HLD008}.

%--------------------------------------------------------------------

%\subsection{Purpose and Background}

%--------------------------------------------------------------------

\subsection{Dependencies}

This is last of the four structures that together form the HOL pretty
printer.  This document, containing a signature, depends upon the
signatures of the other three structures:
Oppen style printing~\cite{DS/FMU/IED/DTD024};
pretty printer support~\cite{DS/FMU/IED/DTD031};
and,
HOL pretty printer functions~\cite{DS/FMU/IED/DTD032}.

%--------------------------------------------------------------------

%\subsection{Interface}
%\subsection{Algorithms}
%\subsection{Possible Enhancements}
%\subsection{Deficiencies}
%\subsection{Terminology}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newpage
\section{SIGNATURE} \label{StartSignature}

=DOC
signature âPrettyPrinterá = sig
=ENDDOC

%--------------------------------------------------------------------
=DOC
val âformat_termá : TERM -> string list;
val âformat_term1á : int -> TERM -> string list;
=DESCRIBE
Produce a number of lines, one string per line, containing a pretty
printing of the given HOL Term.
Line width is given by the integer in $format_term1$, or for
$format_term$ the current line width is used.
=SEEALSO
Pretty printer controls.
=ENDDOC
%--------------------------------------------------------------------

%--------------------------------------------------------------------
=DOC
val âformat_typeá : TYPE -> string list;
val âformat_type1á : int -> TYPE -> string list;
=DESCRIBE
Produce a number of lines, one string per line, containing a pretty
printing of the given HOL type.
Line width is given by the integer in $format_term1$, or for
$format_term$ the current line width is used.
=SEEALSO
Pretty printer controls.
=ENDDOC
%--------------------------------------------------------------------

%--------------------------------------------------------------------
=DOC
val âformat_theoremá : THM -> string list;
val âformat_theorem1á : int -> THM -> string list;
=DESCRIBE
Produce a number of lines, one string per line, containing a pretty
printing of the given HOL Theorem.
Line width is given by the integer in $format_term1$, or for
$format_term$ the current line width is used.
=SEEALSO
Pretty printer controls.
=ENDDOC
%--------------------------------------------------------------------

=DOC
end (* of signature PrettyPrinter *);
=ENDDOC

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\section{TEST POLICY}

A statement of the general principle of testing to be adopted is given
in~\cite{DS/FMU/IED/PLN008}.  This section gives some individual
comments on special testing requirements pretty printing.

The pretty printer is split across four structures.  The first of
these, the Oppen printing functions~\cite{DS/FMU/IED/DTD024}, has its
own test test policy in~\cite{DS/FMU/IED/MDT024}.  The other three are
tested together, this reflects the  structure of the pretty printer.
The HOL printing routines of~\cite{DS/FMU/IED/DTD032} have no
significant user interface, they are added to the database of functions
maintained by the support routines of~\cite{DS/FMU/IED/DTD031}, and
thus cannot be tested on their own.  The support routines
of~\cite{DS/FMU/IED/DTD031} might themselves be tested on their own,
but the interfaces are exercised by the HOL printing routines.  This
document gathers together all of the pretty printing routines and
provides an interface to the pretty printer, it thus forms the most
convenient interface for the tests.

Tests will be oriented to the HOL concrete syntax, they will exercise
all of the clauses in the HOL concrete syntax
of~\cite{DS/FMU/IED/DEF001} and will contain a large number of nested
clauses.  The bracket elimination code must be carefully tested to
ensure that all the necessary brackets are present.  This will be done
by creating HOL terms, formatting them into a string using the pretty
printer, parsing these strings back to form new terms and testing that
they are the same as the originals.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%********************************************************************
%--------------------------------------------------------------------

\makeatletter
\def\refstepcounter#1{\stepcounter{#1}\global\edef\@currentlabel{\csname
	p@#1\endcsname\csname the#1\endcsname}}
\makeatother

%\twocolumn[\section{INDEX}] \label{Index}
\section{INDEX}

\footnotesize
\printindex

\onecolumn

\end{document}
