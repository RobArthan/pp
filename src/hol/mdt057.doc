
=TEX
% TQtemplate.tex
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\def\Hide#1{}
\def\Bool{``$\it{:}bool\,$''}
\makeindex
\TPPproject{FST PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Implementation of Computational Conversions}  %% Mandatory field
\TPPref{DS/FMU/IED/MDT057}  %% Mandatory field
\def\SCCSversion{$Revision$%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}  %% Mandatory field (with sensible default)
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{Specification}
\TPPkeywords{HOL}
\TPPauthor{R.D.~Arthan & WIN01}  %% Mandatory field
%\TPPauthors{Name 1&location 1\\Name 2&location 2\\Name 3&location 3}
\TPPauthorisation{R.B.Jones & HAT Team Leader}
\TPPabstract{This document contains the module tests for the conversions
which perform arithmetic computations on literals.}
%\TPPabstractB{}
%\TPPabstractC{}
%\TPPabstractD{}
%\TPPabstractE{}
%\TPPabstractF{}
\TPPdistribution{\parbox[t]{4.0in}{%
	Library}}

%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}

\begin{document}
\TPPsetsizes
\makeTPPfrontpage

\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}

\newpage
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}  % to get section number `0.3'
\begin{description}
\item [Issue \SCCSversion\ (\FormatDate{91/10/16%
})]
First draft.
\end{description}
\subsection{Changes Forecast}
None.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains module tests for
the material whose detailed design is given in \cite{DS/FMU/IED/DTD057}.
\subsection{Introduction}
\subsubsection{Purpose and Background}
See \cite{DS/FMU/IED/DTD057}.
\subsubsection{Dependencies}
This document depends on the usual module test support defined
in \cite{DS/FMU/IED/DTD013,DS/FMU/IED/IMP013}.
\section{TEST CASES}
\begin{description}
\item[Group 1] This group tests the operation on valid data of
the numeric conversions.
\item[Group 2]  This group tests the operation on invalid data of
the numeric conversions.
\item[Group 3] This group tests the operation on valid data of
the character conversion.
\item[Group 4]  This group tests the operation on invalid data of
the character conversion.
\item[Group 5] This group tests the operation on valid data of
the string conversion.
\item[Group 6]  This group tests the operation on invalid data of
the string conversion.
\item[Group 7]  This group tests the operation of the proof context.
\end{description}
\section{PROLOGUE}
Standard prologue:
=SML
usefile"dtd013.sml";
usefile"imp013.sml";
init_mt_results();
=TEX
Set up theory:
=SML
val €side_effect› = open_theory"basic_hol";
=TEX
\section{THE TESTS}
\subsection{Group 1}
=SML
store_mt_results
mt_run [
	("57.1.a.1", dest_thm o º_conv, ¨0 º 0Æ, ([], ¨0 º 0 § TÆ)),
	("57.1.a.2", dest_thm o º_conv, ¨10 º 100Æ, ([], ¨10 º 100 § TÆ)),
	("57.1.a.3", dest_thm o º_conv, ¨1 º 0Æ, ([], ¨1 º 0 § FÆ)),
	("57.1.a.4", dest_thm o º_conv, ¨1001 º 101Æ, ([], ¨1001 º 101 § FÆ)),

	("57.1.b.1", dest_thm o æ_conv, ¨0 æ 0Æ, ([], ¨0 æ 0 § TÆ)),
	("57.1.b.2", dest_thm o æ_conv, ¨10 æ 100Æ, ([], ¨10 æ 100 § FÆ)),
	("57.1.b.3", dest_thm o æ_conv, ¨0 æ 1Æ, ([], ¨0 æ 1 § FÆ)),
	("57.1.b.4", dest_thm o æ_conv, ¨1001 æ 101Æ, ([], ¨1001 æ 101 § TÆ))
];
=TEX
=SML
store_mt_results
mt_run [
	("57.1.c.1", dest_thm o less_conv, ¨0 < 0Æ, ([], ¨0 < 0 § FÆ)),
	("57.1.c.2", dest_thm o less_conv, ¨10 < 100Æ, ([], ¨10 < 100 § TÆ)),
	("57.1.c.3", dest_thm o less_conv, ¨0 < 1Æ, ([], ¨0 < 1 § TÆ)),
	("57.1.c.4", dest_thm o less_conv, ¨1001 < 101Æ, ([], ¨1001 < 101 § FÆ)),

	("57.1.d.1", dest_thm o greater_conv, ¨0 > 0Æ, ([], ¨0 > 0 § FÆ)),
	("57.1.d.2", dest_thm o greater_conv, ¨10 > 100Æ, ([], ¨10 > 100 § FÆ)),
	("57.1.d.3", dest_thm o greater_conv, ¨1 > 0Æ, ([], ¨1 > 0 § TÆ)),
	("57.1.d.4", dest_thm o greater_conv, ¨1001 > 101Æ, ([], ¨1001 > 101 § TÆ))
];
=TEX
=SML
store_mt_results
mt_run [
	("57.1.e.1", dest_thm o plus_conv, ¨0 + 0Æ, ([], ¨0 + 0 = 0Æ)),
	("57.1.e.2", dest_thm o plus_conv, ¨999 + 0Æ, ([], ¨999 + 0 = 999Æ)),
	("57.1.e.3", dest_thm o plus_conv, ¨0 + 1Æ, ([], ¨0 + 1 = 1Æ)),
	("57.1.e.4", dest_thm o plus_conv, ¨1001 + 101Æ, ([], ¨1001 + 101 = 1102Æ)),

	("57.1.f.1", dest_thm o minus_conv, ¨0 - 0Æ, ([], ¨0 - 0 = 0Æ)),
	("57.1.f.2", dest_thm o minus_conv, ¨10 - 0Æ, ([], ¨10 - 0 = 10Æ)),
	("57.1.f.3", dest_thm o minus_conv, ¨1001 - 100Æ, ([], ¨1001 - 100 = 901Æ)),
	("57.1.f.4", dest_thm o minus_conv, ¨1001 - 1001Æ, ([], ¨1001 - 1001 = 0Æ))
];
=SML
store_mt_results
mt_run [
	("57.1.g.1", dest_thm o times_conv, ¨0 * 0Æ, ([], ¨0 * 0 = 0Æ)),
	("57.1.g.2", dest_thm o times_conv, ¨999 * 0Æ, ([], ¨999 * 0 = 0Æ)),
	("57.1.g.3", dest_thm o times_conv, ¨0 * 1Æ, ([], ¨0 * 1 = 0Æ)),
	("57.1.g.4", dest_thm o times_conv, ¨1 * 1Æ, ([], ¨1 * 1 = 1Æ)),
	("57.1.g.5", dest_thm o times_conv, ¨1 * 0Æ, ([], ¨1 * 0 = 0Æ)),
	("57.1.g.6", dest_thm o times_conv, ¨0 * 77Æ, ([], ¨0 * 77 = 0Æ)),
	("57.1.g.7", dest_thm o times_conv, ¨77 * 1Æ, ([], ¨77 * 1 = 77Æ)),
	("57.1.g.8", dest_thm o times_conv, ¨1 * 77Æ, ([], ¨1 * 77 = 77Æ)),
	("57.1.g.9", dest_thm o times_conv, ¨77 * 0Æ, ([], ¨77 * 0 = 0Æ)),
	("57.1.g.10", dest_thm o times_conv, ¨1001 * 77Æ, ([], ¨1001 * 77 = 77077Æ))
];
=SML
store_mt_results
mt_run [
	("57.1.h.1", dest_thm o div_conv, ¨0 Div 1Æ, ([], ¨0 Div 1 = 0Æ)),
	("57.1.h.2", dest_thm o div_conv, ¨777 Div 1Æ, ([], ¨777 Div 1 = 777Æ)),
	("57.1.h.3", dest_thm o div_conv, ¨777 Div 7Æ, ([], ¨777 Div 7 = 111Æ)),
	("57.1.h.4", dest_thm o div_conv, ¨778 Div 7Æ, ([], ¨778 Div 7 = 111Æ)),
	("57.1.h.5", dest_thm o div_conv, ¨779 Div 7Æ, ([], ¨779 Div 7 = 111Æ)),
	("57.1.h.6", dest_thm o div_conv, ¨780 Div 7Æ, ([], ¨780 Div 7 = 111Æ)),
	("57.1.h.7", dest_thm o div_conv, ¨781 Div 7Æ, ([], ¨781 Div 7 = 111Æ)),
	("57.1.h.8", dest_thm o div_conv, ¨782 Div 7Æ, ([], ¨782 Div 7 = 111Æ)),
	("57.1.h.9", dest_thm o div_conv, ¨783 Div 7Æ, ([], ¨783 Div 7 = 111Æ)),
	("57.1.h.10", dest_thm o div_conv, ¨784 Div 7Æ, ([], ¨784 Div 7 = 112Æ)),

	("57.1.i.1", dest_thm o mod_conv, ¨0 Mod 1Æ, ([], ¨0 Mod 1 = 0Æ)),
	("57.1.i.2", dest_thm o mod_conv, ¨777 Mod 1Æ, ([], ¨777 Mod 1 = 0Æ)),
	("57.1.i.3", dest_thm o mod_conv, ¨777 Mod 7Æ, ([], ¨777 Mod 7 = 0Æ)),
	("57.1.i.4", dest_thm o mod_conv, ¨778 Mod 7Æ, ([], ¨778 Mod 7 = 1Æ)),
	("57.1.i.5", dest_thm o mod_conv, ¨779 Mod 7Æ, ([], ¨779 Mod 7 = 2Æ)),
	("57.1.i.6", dest_thm o mod_conv, ¨780 Mod 7Æ, ([], ¨780 Mod 7 = 3Æ)),
	("57.1.i.7", dest_thm o mod_conv, ¨781 Mod 7Æ, ([], ¨781 Mod 7 = 4Æ)),
	("57.1.i.8", dest_thm o mod_conv, ¨782 Mod 7Æ, ([], ¨782 Mod 7 = 5Æ)),
	("57.1.i.9", dest_thm o mod_conv, ¨783 Mod 7Æ, ([], ¨783 Mod 7 = 6Æ)),
	("57.1.i.10", dest_thm o mod_conv, ¨784 Mod 7Æ, ([], ¨784 Mod 7 = 0Æ))
];
=TEX
=SML
store_mt_results
mt_run [
	("57.1.j.1", dest_thm o Ó_eq_conv, ¨0 = 0Æ, ([], ¨0 = 0 § TÆ)),
	("57.1.j.2", dest_thm o Ó_eq_conv, ¨777 = 0Æ, ([], ¨777 = 0 § FÆ)),
	("57.1.j.3", dest_thm o Ó_eq_conv, ¨0 = 777Æ, ([], ¨0 = 777 § FÆ)),
	("57.1.j.4", dest_thm o Ó_eq_conv, ¨777 = 777Æ, ([], ¨777 = 777 § TÆ))
];
=TEX
\subsection{Group 2}
=SML
fun fail_case (tag : string) (conv : CONV) (area : string) (msg : int) (tm : TERM) = (
	(tag, dest_thm o conv, tm, gen_fail_msg area msg [string_of_term tm])
);
=TEX
=SML
store_mt_results
mt_run_fail [
	fail_case "57.2.a.1" º_conv "º_conv" 57001 ¨0 æ 0Æ,
	fail_case "57.2.a.2" º_conv "º_conv" 57001 ¨x º 100Æ,

	fail_case "57.2.b.1" æ_conv "æ_conv" 57002 ¨0 º 0Æ,
	fail_case "57.2.b.2" æ_conv "æ_conv" 57002 ¨x æ 100Æ
];
=TEX
=SML
store_mt_results
mt_run_fail [
	fail_case "57.2.c.1" less_conv "less_conv" 57005 ¨0 > 0Æ,
	fail_case "57.2.c.2" less_conv "less_conv" 57005 ¨x < 100Æ,

	fail_case "57.2.d.1" greater_conv "greater_conv" 57004 ¨0 * 0Æ,
	fail_case "57.2.d.2" greater_conv "greater_conv" 57004 ¨x < 100Æ
];
=TEX
=SML
store_mt_results
mt_run_fail [
	fail_case "57.2.e.1" plus_conv "plus_conv" 6085 ¨0 * 0Æ,
	fail_case "57.2.e.2" plus_conv "plus_conv" 6085 ¨x + 100Æ,

	fail_case "57.2.f.1" minus_conv "minus_conv" 57006 ¨0 Div 0Æ,
	fail_case "57.2.f.2" minus_conv "minus_conv" 57006 ¨x - 100Æ,
	fail_case "57.2.f.3" minus_conv "minus_conv" 57010 ¨99 - 100Æ
];
=TEX
=SML
store_mt_results
mt_run_fail [
	fail_case "57.2.g.1" times_conv "times_conv" 57009 ¨0 < 0Æ,
	fail_case "57.2.g.2" times_conv "times_conv" 57009 ¨x * 100Æ
];
=TEX
=SML
store_mt_results
mt_run_fail [
	fail_case "57.2.h.1" div_conv "div_conv" 57003 ¨0 Mod 0Æ,
	fail_case "57.2.h.2" div_conv "div_conv" 57003 ¨x Div 100Æ,
	fail_case "57.2.h.3" div_conv "div_conv" 57011 ¨54 Div 0Æ,

	fail_case "57.2.i.1" mod_conv "mod_conv" 57007 ¨0 * 0Æ,
	fail_case "57.2.i.2" mod_conv "mod_conv" 57007 ¨x Mod 100Æ,
	fail_case "57.2.i.3" mod_conv "mod_conv" 57012 ¨54 Mod 0Æ
];
=TEX
=SML
store_mt_results
mt_run_fail [
	fail_case "57.2.j.1" Ó_eq_conv "Ó_eq_conv" 57100 ¨0 < 0Æ,
	fail_case "57.2.j.2" Ó_eq_conv "Ó_eq_conv" 57100 ¨x = 1Æ
];
=TEX
\subsection{Group 3}
=SML
store_mt_results
mt_run [
	("57.3.a.1", dest_thm o char_eq_conv, ¨`a` = `a`Æ, ([], ¨`a` = `a` § TÆ)),
	("57.3.a.2", dest_thm o char_eq_conv, ¨`\000` = `\000`Æ, ([], ¨`\000` = `\000` § TÆ)),
	("57.3.a.3", dest_thm o char_eq_conv, ¨`a` = `A`Æ, ([], ¨`a` = `A` § FÆ)),
	("57.3.a.4", dest_thm o char_eq_conv, ¨`\000` = `\255`Æ, ([], ¨`\000` = `\255` § FÆ))
];
=TEX
\subsection{Group 4}
=SML
store_mt_results
mt_run_fail [
	fail_case "57.4.a.1" char_eq_conv "char_eq_conv" 57200 ¨1 = 2Æ,
	fail_case "57.4.a.2" char_eq_conv "char_eq_conv" 57200 ¨`a` = aÆ
];
=TEX
\subsection{Group 5}
=SML
store_mt_results
mt_run [
	("57.5.a.1", dest_thm o string_eq_conv, ¨"" = ""Æ, ([], ¨"" = "" § TÆ)),
	("57.5.a.2", dest_thm o string_eq_conv, ¨"a" = "a"Æ, ([], ¨"a" = "a" § TÆ)),
	("57.5.a.3", dest_thm o string_eq_conv, ¨"abcdef" = "abcdef"Æ, ([], ¨"abcdef" = "abcdef" § TÆ)),
	("57.5.a.4", dest_thm o string_eq_conv, ¨"" = "ab"Æ, ([], ¨"" = "ab" § FÆ)),	("57.5.a.5", dest_thm o string_eq_conv, ¨"ab" = ""Æ, ([], ¨"ab" = "" § FÆ)),
	("57.5.a.6", dest_thm o string_eq_conv, ¨"a" = "ab"Æ, ([], ¨"a" = "ab" § FÆ)),	("57.5.a.7", dest_thm o string_eq_conv, ¨"ab" = "a"Æ, ([], ¨"ab" = "a" § FÆ))
];
=TEX
\subsection{Group 6}
=SML
store_mt_results
mt_run_fail [
	fail_case "57.6.a.1" string_eq_conv "string_eq_conv" 57300 ¨`a` = `a`Æ,
	fail_case "57.6.a.2" string_eq_conv "string_eq_conv" 57300 ¨"a" = aÆ
];
=TEX
\subsection{Group 7}
=SML
push_proof_context comp_epc;
store_mt_results
mt_run [
	("5777.a.1", dest_thm o rewrite_conv[],
		¨((((20 + 21) - 22) * 23) Div 24) Mod 25Æ, ([], ¨((((20 + 21) - 22) * 23) Div 24) Mod 25 = 18Æ)),
	("57.67.a.2", dest_thm o rewrite_conv[],
		¨1 < 2 ± ≥(3 > 4) ± (5 º 6) ± ≥(7 æ 8)Æ, ([], ¨1 < 2 ± ≥(3 > 4) ± (5 º 6) ± ≥(7 æ 8) § TÆ)),
	("57.76.a.3", dest_thm o rewrite_conv[],
		¨1 + 2 * 3 + 4 = 4 + 3 * 2 + 1Æ, ([], ¨1 + 2 * 3 + 4 = 4 + 3 * 2 + 1 § TÆ))
];
store_mt_results
mt_run [
	("57.76.a.4", dest_thm o rewrite_conv[],
		¨"abc" = "def" § ≥`x` =`x`Æ, ([], ¨("abc" = "def" § ≥`x` =`x`) § TÆ))
];
=TEX
\section{EPILOGUE}
=SML
diag_string(summarize_mt_results());
=TEX
\end{document}

