=IGN
********************************************************************************
dtd073.doc: this file is part of the PPHol system

Copyright (c) 2002 Lemma 1 Ltd.

See the file LICENSE for your rights to use and change this file.

Contact: Rob Arthan < rda@lemma-one.com >
********************************************************************************
%  $Id: dtd073.doc,v 1.12 2003/09/30 13:18:06 rda Exp $ %Z%
=TEX
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\makeindex
\TPPproject{FST Project}  %% Mandatory field
\TPPtitle{Detailed Design for the Theory of Finite Sets}  %% Mandatory field
\def\TPPheadtitle{Detailed Design for the Theory of\cr
Finite Sets}
\TPPref{DS/FMU/IED/DTD073}  %% Mandatory field
\def\SCCSversion{$Revision: 1.12 $ %
}
\TPPissue{\SCCSversion}  %% Mandatory field
\def\SCCSdate{\FormatDate{$Date: 2003/09/30 13:18:06 $ %
}}
\TPPdate{\SCCSdate}  %% Mandatory field
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{SML Literate Script}
\TPPkeywords{}
\TPPauthor{R.B.Jones & WIN01}  %% Mandatory field
%\TPPauthors{R.D. Arthan & WIN01\\K. Blackburn & WIN01}
\TPPauthorisation{R.D. Arthan & FST Team Leader}
\TPPabstract{This document gives a detailed design for the 
theory of finite sets.}
\TPPdistribution{\parbox[t]{4.0in}{%
	    Library
}}
%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}
\begin{document}
\makeTPPfrontpage
\vfill
\begin{centering}
\bf Copyright \copyright\ : Lemma 1 Ltd. 1992
\end{centering}
\pagebreak
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}
\begin{description}
\item[Issue 1.1-1.5]

These are the first drafts of the document.
\item[Issue 1.6 (15th December 1992)]
Fixed theory design.
\item[Issue 1.7]
Fix for SML'97.
\item[Issue 1.8]
Proved consistency of {\it Max} and {\it Min}.
\item[Issue 1.10] Copyright and banner updates for open source release.
\item[Issue 1.11] PPHol-specific updates for open source release
\item[Issue 1.12] Added finite set induction (theorem and tactic) and added some basic theorems about finiteness.
\item[Issue 1.13] Added theorems about sizes of finite sets.
\end{description}
\subsection{Changes Forecast}

Should be changed to use integers instead of natural numbers when these are available.

\section{GENERAL}
\subsection{Scope}
This document contains a detailed design
for the theory ``finset''.
The design is implemented in \cite{DS/FMU/IED/IMP073}.

\subsection{Introduction}
\subsubsection{Purpose and Background}
This document contains the detailed design for the theory ``relation''.

\subsubsection{Dependencies}
This document depends on \cite{DS/FMU/IED/IMP072}, and the theory design tools of \cite{DS/FMU/IED/DTD035}.
\subsubsection{Deficiencies}
None known.
\subsubsection{Possible Enhancements}
\section{THE THEORY ``$fin\_set$''}
\subsection{Preamble}
=THDOC
set_flag("tc_thms_only", true);
=DESCRIBE
We set the theorem check only flag since the definitions in the theory are
to be made via constant specification boxes.
=ENDDOC
=THDOC
req_name Û"fin_set"İ (Value "seq");
=DESCRIBE
The theory ``fin\_set'' contains the definitions of various functional (i.e. many-one) subsets of the set of finite sets.
=ENDDOC
=SML
val _ = open_theory "seq";
val _ = push_pc "hol";
val _ = new_theory "fin_set";
=TEX
\subsection{The Theory Contents}
¹HOLCONST
Ü	$Ûîİ: î ğ
÷üüüüüüüüüüüüüüüüüüü
Ü	î = Universe
Ü
°
¹HOLCONST
Ü	ÛFiniteİ:'a ğ ğ
÷üüüüüüüüüüüüüüüüüüü
Ü	Finite = ¥{u | {}  u ± µa x·a  u ´ ({x} À a)  u}
Ü
°
¹HOLCONST
Ü	Ûæİ:'a ğ ­ 'a ğ ğ
÷üüüüüüüüüüüüüüüüüüü
Ü	µ (x : 'a ğ)· æ x = ğ x ¡ Finite
Ü
°
¹HOLCONST
Ü	Ûæ‰1İ:'a ğ ­ 'a ğ ğ
÷üüüüüüüüüüüüüüüüüüü
Ü	µ (x : 'a ğ)· æ‰1 x = æ x \ {{}}
°
¹HOLCONST
Ü	ÛMinİ : î SET ­ î
÷
Ü	µm a·m  a ± (µi·i  a ´ m ¼ i) ´ Min a = m
°
¹HOLCONST
Ü	$ÛMaxİ:î ğ ­ î 
÷üüüüüüüüüüüüüüüüüüü
Ü	µm a·m  a ± (µi·i  a ´ i ¼ m) ´ Max a = m
°
¹HOLCONST
	ÛSizeİ : 'a SET ­ î
÷
	µa·Size a = Min {i | ¶list· Length list = i ± Elems list = a}
°
=SML
val _ = declare_alias(Û"#"İ, ¬Size®);
¹HOLCONST
Ü	$ÛIterİ:î ­ ('a ª 'a) ­ ('a ª 'a)
÷üüüüüüüüüüüüüüüüüüü
Ü	µ (r : 'a ª 'a)(n : î)
Ü	· Iter 0 r = Id Universe
Ü	± Iter (n+1) r = r » (Iter n r)
°
=SML
val _ = declare_infix(240,"Ÿ");
¹HOLCONST
Ü	$ÛŸİ:'a ğ ­ 'b ğ ­ ('a ª 'b) ğ
÷üüüüüüüüüüüüüüüüüüü
Ü	µ a : 'a ğ; b : 'b ğ
Ü	· a Ÿ b = (a ß b) ¡ Finite
°
=SML
val _ = declare_infix(240,"");
¹HOLCONST
Ü	$Ûİ:'a ğ ­ 'b ğ ­ ('a ª 'b) ğ
÷üüüüüüüüüüüüüüüüüüü
Ü	µ a : 'a ğ; b : 'b ğ
Ü	· a  b = (a Ÿ b) ¡ (a ş b)	
°
\subsection{Theorems}
=THDOC
req_consistency_thm¬Min®;
=DESCRIBE
This theorem demonstrates the consistency of the definition of
the {\it Min} function.
=ENDDOC
=THDOC
req_consistency_thm¬Max®;
=DESCRIBE
This theorem demonstrates the consistency of the definition of
application of the {\it Max}.
=ENDDOC
=THDOC
req_thm("finite_induction_thm", ([], ¬
		µp·	p {} ± (µa x·a  Finite ± p a ± ³x  a ´ p({x} À a))
		´ 	µa·a  Finite ´ p a
®));
=DESCRIBE
The principle of induction for finite sets.
=ENDDOC
=THDOC
req_thm("empty_finite_thm", ([],
	¬{}  Finite®));
req_thm("singleton_À_finite_thm", ([],
	¬µ a x· a  Finite ´ ({x} À a)  Finite®));
req_thm("€_finite_thm", ([],
	¬µa b· a  Finite ± b € a ´ b  Finite®));
req_thm("À_finite_thm", ([],
	¬µ a b· a  Finite ± b  Finite ´ a À b  Finite"));
req_thm("¡_finite_thm", ([],
	¬µ a b· a  Finite ² b  Finite ´ a ¡ b  Finite"));
req_thm("finite_distinct_elems_thm", ([],
	¬µ a· a  Finite ´ (¶ list· list  Distinct ± Elems list = a)"));
req_thm("length_ù_¼_thm", ([],
	¬µ list a· # (list ù a) ¼ # list"));
req_thm("length_ù_less_thm", ([],
	¬µ list a· ³ Elems list \ a = {} ´ # (list ù a) < # list"));
req_thm("elems_ù_thm", ([],
	¬µ list a· Elems (list ù a) = Elems list ¡ a"));
req_thm("distinct_length_¼_thm", ([],
	¬µ list1 list2 · list1  Distinct ± Elems list1 = Elems list2 ´ # list1 ¼ # list2"));
req_thm("distinct_size_length_thm", ([],
	¬µ list a· list  Distinct ± Elems list = a ´ # a = # list"));
req_thm("size_empty_thm", ([],
	¬# {} = 0"));
req_thm("size_singleton_À_thm", ([],
	¬µ x a· a  Finite ± ³ x  a ´ # ({x} À a) = # a + 1"));
req_thm("size_singleton_thm", ([],
	¬µ x· # {x} = 1"));
req_thm("size_À_thm", ([],
	¬µ a b · a  Finite ± b  Finite ´ # (a À b) + # (a ¡ b) = # a + # b"));
req_thm("size_0_thm", ([],
	¬µ a· a  Finite ´ (# a = 0 ¤ a = {})"));
req_thm("size_1_thm", ([],
	¬µ a· a  Finite ´ (# a = 1 ¤ (¶ x· a = {x}))"));
req_thm("Ş_finite_thm", ([],
	¬µ u· u  Finite ± u € Finite ´ Ş u  Finite"));
req_thm("pigeon_hole_thm", ([],
	¬µ u · u  Finite ± u € Finite ± # u < # (Ş u) ´ (¶ a· a  u ± # a > 1)"));
=DESCRIBE
Basic facts about finite sets and their sizes.
=ENDDOC
\subsection{Signature of the theory ``finset''}
=DOC
signature ÛFinSetTheoryİ = sig
	val Ûî_defİ : THM;				val Ûfinite_defİ : THM;
	val Ûæ_defİ : THM;				val Ûæ‰1_defİ : THM;
	val Ûmin_defİ : THM;				val Ûmax_defİ : THM;
	val Ûsize_defİ : THM;				val Ûiter_defİ : THM;
	val ÛŸ_defİ : THM;				val Û_defİ : THM;
	val Ûfinite_induction_thmİ : THM;		val Ûempty_finite_thmİ : THM;
	val Ûsingleton_À_finite_thmİ : THM;	val Û€_finite_thmİ : THM;
	val ÛÀ_finite_thmİ : THM;			val Û¡_finite_thmİ : THM;
	val Ûfinite_distinct_elems_thmİ : THM;	val Ûlength_ù_¼_thmİ : THM;
	val Ûlength_ù_less_thmİ : THM;		val Ûelems_ù_thmİ : THM;
	val Ûdistinct_length_¼_thmİ : THM;	val Ûdistinct_size_length_thmİ : THM;
	val Ûsize_empty_thmİ : THM;		val Ûsize_singleton_À_thmİ : THM;
	val Ûsize_singleton_thmİ : THM;		val Ûsize_À_thmİ : THM;
	val Ûsize_0_thmİ : THM;			val Ûsize_1_thmİ : THM;
	val ÛŞ_finite_thmİ : THM;			val Ûpigeon_hole_thmİ : THM;
=DESCRIBE
These are the ML bindings for the definitions and theorems in the  declare theory ``$fin\_set$''.
=ENDDOC
=DOC
	val Ûfinite_induction_tacİ : TERM -> TACTIC;
=DESCRIBE
An induction tactic for finite sets.  To prove
=INLINEFT
t
=TEX
\ on the assumption that
=INLINEFT
s  Finite
=TEX
, it suffices to prove
=INLINEFT
t[{}/s]
=TEX
\ and to prove
=INLINEFT
t[({x} À s)/s]
=TEX
\ on the
assumption that $t$ holds, that
=INLINEFT
s  Finite
=TEX
,
=TEX
\ and that
=INLINEFT
³x  s
=TEX
.  The term argument must be a variable, $s$,
with type an instance of ”'a SET® and must appear free in the conclusion of the goal.
It must also appear once, and only once, in an assumption of the form
=INLINEFT
s  Finite
=TEX
.
=FRULE 2 Tactic
finite_induction_tac ñs®
÷
{ ‡, s  Finite} t[s]
÷
{ ‡ } t[{}/s] ;
strip {t, s  Finite, ³x  s, ‡} t[({x}À s)/s]
=TEX
=FAILURE
73001	?0 is not a variable
73002	A term of the form ñv  Finite® where v is the induction variable
	could not be found in the assumptions
73003	?0 does not appear free in the conclusion of the goal
73004	?0 appears free in more than one assumption of the goal
=ENDDOC
=SML
end;(* of signature FinSetTheory *)
=TEX
\section{TEST POLICY}
Any functions given in this document should be tested according to the general criteria set out in \cite{DS/FMU/IED/PLN008}, using the tests in \cite{DS/FMU/IED/MDT072}.
In \cite{DS/FMU/IED/MDT072} the theory produced is checked by the theory design tools of \cite{DS/FMU/IED/DTD035}, against the theory design provided.

The module tests should include automatic proof of all the ``rules'' in \cite{Spivey89} expressible in this part of the theory of functional relations.
\twocolumn[\section{INDEX}]
\small
\printindex
\end{document}


