=TEX
\documentstyle[hol,11pt,TQ]{article}
\ftlinepenalty=9999
\makeindex
\TPPproject{FST PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Module Tests for Proof Contexts}  %% Mandatory field
\def\TPPheadtitle{Module Tests for Proof Contexts}
\TPPref{DS/FMU/IED/MDT051}  %% Mandatory field
\def\SCCSversion{$Revision$ %
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$ %
}}
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{ML Literate Script}
\TPPkeywords{}
\TPPauthor{K.Blackburn & WIN01}  %% Mandatory field
%\TPPauthors{Name 1&location 1\\Name 2&location 2\\Name 3&location 3}
\TPPauthorisation{R.D.Arthan & Project Manager}
\TPPabstract{A set of module tests are given for the 
proof context functions.}
\TPPdistribution{\parbox[t]{4.0in}{%
	    Library
}}
\begin{document}
\makeTPPfrontpage
\vfill
\begin{centering}
\bf Copyright \copyright\ : International Computers Ltd \number\year
\end{centering}
\pagebreak
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History} 
\begin{description}
\item [Issue 1.1]
First draft version.
\end{description}
%\subsection{Changes Forecast}
\section{GENERAL}
\subsection{Scope}
This document contains the module testing of the proof context functions.
The design is in \cite{DS/FMU/IED/DTD051}
and it is
implemented in \cite{DS/FMU/IED/IMP051}.

\subsection{Introduction}
\subsubsection{Purpose and Background}
This document contains the module testing of the material given a design in \cite{DS/FMU/IED/DTD051},
following the test policy given in that document and the general policy given in \cite{DS/FMU/IED/PLN008}.

\subsubsection{Dependencies}
This document is derived from the detailed design in \cite{DS/FMU/IED/DTD051},
and is further influenced by the implementation, in  \cite{DS/FMU/IED/IMP051}.
\subsubsection{Deficiencies}

\section{TEST HARNESS MATERIAL}
=SML
usefile "dtd013.sml";
usefile "imp013.sml";
init_mt_results ();
=TEX
\section{TEST DATA}
This section contains data used in the test, that
in themselves are not part of the tests.
However, they may fail if the functions tested are ill-formed.
=SML
val epc : EPROOF_CONTEXT = {
		rw_net = NetTools.empty,
		rw_canon = (fn thm => [thm]),
		sa_conv = simple_%beta%_conv,
		sg_conv = id_conv};

val beta_redex = ª(ç x é (x ä F)) Tº;
=TEX
We wish to start with the initial proof context, so
=SML
repeat pop_proof_context;
=TEX
\section{THE TESTS}
$push/pop/get\_proof\_context$ is implicitly tested by the following functions.
=SML
store_mt_results mt_run [
	("?_proof_context 1",
	dest_thm o #sa_conv (get_proof_context()),
	beta_redex,
	dest_thm(id_conv beta_redex))];
push_proof_context epc;
store_mt_results mt_run [
	("?_proof_context 2",
	dest_thm o #sa_conv (get_proof_context()),
	beta_redex,
	dest_thm(simple_%beta%_conv beta_redex))];
val epc1 = pop_proof_context ();
store_mt_results mt_run [
	("?_proof_context 3",
	dest_thm o #sa_conv (get_proof_context()),
	beta_redex,
	dest_thm(id_conv beta_redex))];
push_proof_context epc1;
store_mt_results mt_run [
	("?_proof_context 4",
	dest_thm o #sa_conv (get_proof_context()),
	beta_redex,
	dest_thm(simple_%beta%_conv beta_redex))];
val epc2 = pop_proof_context ();
store_mt_results mt_run_fail [
	("pop_proof_context 51001",
	pop_proof_context,
	(),
	gen_fail_msg "pop_proof_context" 51001 [])
	];
=TEX
\subsection{End of Tests}
=SML
diag_string(summarize_mt_results ());
=TEX
\end{document}
