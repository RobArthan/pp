=TEX
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\makeindex
\TPPproject{FST PROJECT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Implementation of the Theory of Characters and Strings}  %% Mandatory field
\def\TPPheadtitle{Implementation of the \cr
Theory of Characters and Strings}
\TPPref{DS/FMU/IED/IMP040}  %% Mandatory field
\def\SCCSversion{$Revision$%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{SML Literate Script}
\TPPkeywords{}
\TPPauthor{D.J.~King & WIN01}  %% Mandatory field
\TPPauthorisation{R.B.~Jones & FMU Manager}
\TPPabstract{This document contains the implementation of the theory of characters and strings for ICL HOL.}
\TPPdistribution{\parbox[t]{4.0in}{%
	    Library
}}
\begin{document}
\makeTPPfrontpage
\vfill
\begin{centering}

\bf Copyright \copyright\ : International Computers Ltd \number\year

\end{centering}
\pagebreak
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History} 
\begin{description}
\item [Issue 1.1 (7 September 1991)] First draft.
\item [Issue 1.2 (25 November 1991)] Draft for review.

\item[Issue 1.4, \FormatDate{92/01/20} ] Updated to use new fonts.
\item[Issue 1.5 (23rd January 1992)]
$new\_axiom$, $simple\_new\_type\_defn$, $new\_type\_defn$
all changed to take lists of keys, rather than single ones.
\item[Issue 1.6,1.7 (27th January 1992)]
Corrected arithmetic theorem names, and other typos.
\item [Issue 1.8 (13th April 1992)]
Changes due to CR0017.
\end{description}
\subsection{Changes Forecast}
None.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains parts of the ICL HOL
proof development system called for in \cite{DS/FMU/IED/HLD011} and \cite{DS/FMU/IED/DTD040}.
\subsection{Introduction}

\section{PROLOGUE}
In this section we create the new theory and begin the structure which
contains the theory.

=SML
structure €Char› : Char = struct
=TEX
=SML
val _ = open_theory "list";
val _ = new_theory "char";
=TEX
\section{INTRODUCING THE TYPE ``CHAR''}
In this section,we define the type $CHAR$.
First we prove the existence of a function mapping
a concrete representation of characters to bool.

=SML
val €is_char_rep_thm› = (
push_goal ([],¨∂ IsCharRep: Ó≠BOOL ∑ µx ∑ IsCharRep x = x < 256Æ);
a(simple_∂_tac¨Ãx∑x < 256Æ);
a(rewrite_tac[]);
pop_thm()
);
=TEX
=SML
val €is_char_rep_def› = new_spec(["IsCharRep","is_char_rep_def"],1,is_char_rep_thm);
=TEX
In order to use $IsCharRep$ to define the new type,
we need to show that the subset of representation
type which it determines is non-empty.
=SML
val €char_∂_thm› = (
push_goal([],¨∂x ∑ IsCharRep xÆ);
a(strip_asm_tac is_char_rep_def);
a(simple_∂_tac¨0Æ THEN asm_rewrite_tac[less_clauses, plus1_conv¨256Æ]);
pop_thm()
);
=TEX
Now we can introduce the new type:
=SML
val €char_def› = new_type_defn(["CHAR","char_def"],"CHAR",[],char_∂_thm);
=TEX
\section{BASIC DEFINITIONS}
The names of $AbsChar$ is known by
the HOL kernel. We show that functions exist 
with the required properties for the abstract type $CHAR$.

=SML
val €char_abs_rep_thm› = (
push_goal([],¨∂ AbsChar : Ó≠CHAR; RepChar : CHAR≠Ó ∑
	(µa ∑ AbsChar (RepChar a) = a) ±
	(µr ∑ IsCharRep r §
		RepChar (AbsChar r) = r)Æ);
a(strip_asm_tac (simple_µ_elim ¨IsCharRep:Ó≠BOOLÆ
	(inst_type_rule[(¨:ÓÆ,¨:'bÆ),(¨:CHARÆ,¨:'aÆ)]type_lemmas_thm)));
(* *** Goal "1" *** *)
a(contr_tac);
a(strip_asm_tac char_def);
a(POP_ASM_T ante_tac THEN asm_rewrite_tac[]);
(* *** Goal "2" *** *)
a(MAP_EVERY simple_∂_tac [¨absÆ,¨repÆ]);
a(asm_rewrite_tac[]);
pop_thm()
);
=TEX
=SML
val €abs_char_rep_char_def› = new_spec(["AbsChar","RepChar","abs_char_rep_char_def"],
	2, char_abs_rep_thm);
=TEX
\section{THE TYPE ABBREVIATION ``STRING''}
Strings are represented as lists of characters.

=SML
val _ = declare_type_abbrev("STRING",[],¨:CHAR LISTÆ);
=TEX
\section{EPILOGUE}
This completes the implementation of the theory for characters
and strings.
=SML
end (* structure Char *);
=TEX
=SML
open Char;
=TEX
{\twocolumn[\section{INDEX OF DEFINED TERMS}]
{\makeatletter
\printindex}}
\end{document}



