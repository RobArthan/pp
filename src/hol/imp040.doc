=TEX
\documentstyle[hol,11pt,TQ]{article}
\ftlinepenalty=9999
\makeindex
\TPPproject{FORMAL METHODS UNIT}  %% Mandatory field
%\TPPvolume{}
%\TPPpart{}
\TPPtitle{Theory of Characters and Strings}  %% Mandatory field
\TPPref{DS/FMU/IED/IMP040}  %% Mandatory field
\def\SCCSversion{$Revision$%
}
\TPPissue{\SCCSversion}  %% Mandatory field
\TPPdate{\FormatDate{$Date$%
}}
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{SML Literate Script}
\TPPkeywords{}
\TPPauthor{D.J.~King & WIN01}  %% Mandatory field
\TPPauthorisation{R.B.~Jones & FMU Manager}
\TPPabstract{This document contains the implementation of the theory of characters and strings for ICL HOL.}
\TPPdistribution{\parbox[t]{4.0in}{%
	    Library
}}
\begin{document}
\makeTPPfrontpage
\vfill
\begin{centering}
\bf Copyright \copyright\ : International Computers Ltd \number\year
\end{centering}
\pagebreak
\section{Document control}
\subsection{Contents list}
\tableofcontents
\subsection{Document cross references}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes history} 
\begin{description}
\item [Issue 1.1 (7 September 1991)] First draft.
\end{description}
\subsection{Changes forecast}
Under development.
\pagebreak
\section{GENERAL}
\subsection{Scope}
This document contains parts of the ICL HOL
proof development system called for in \cite{DS/FMU/IED/HLD011}.
\subsection{Introduction}

\section{THE STRUCTURE $CharTheory$}

=SML
structure âCharTheoryá : CharTheory = struct
=TEX
=SML
val _ = open_theory "list";
val _ = new_theory "char";
=TEX
=SML
val âis_char_rep_thmá = (
push_goal ([],»„ IsCharRep: †‹BOOL Ž ƒx Ž IsCharRep x = x < 256¼);
a(simple_„_tac»xŽx < 256¼);
a(rewrite_tac[]);
pop_thm()
);
=TEX
=SML
val âis_char_rep_defá = new_specification(["IsCharRep"],1,is_char_rep_thm);
=TEX
In order to use IsCharRep, to define the new type,
we need to show that the subset of representation
type which it determines is non-empty.
=SML
val âchar_„_thmá = (
push_goal([],»„x Ž IsCharRep x¼);
a(strip_asm_tac is_char_rep_def);
a(simple_„_tac»0¼ THEN asm_rewrite_tac[lt_clauses, plus1_conv»256¼]);
pop_thm()
);
=TEX
Now we can introduce the new type:
=SML
val âchar_defá = new_type_defn("CHAR","CHAR",[],char_„_thm);
=TEX
=SML
val âchar_abs_rep_thmá = (
push_goal([],»„ AbsChar : †‹CHAR; RepChar : CHAR‹† Ž
	(ƒa Ž AbsChar (RepChar a) = a) €
	(ƒr Ž IsCharRep r ‚
		RepChar (AbsChar r) = r)¼);
a(strip_asm_tac (simple_ƒ_elim »IsCharRep:†‹BOOL¼
	(inst_type_rule[(»:†¼,»:'b¼),(»:CHAR¼,»:'a¼)]type_lemmas_thm)));
(* *** Goal "1" *** *)
a(c_contr_tac);
a(strip_asm_tac char_def);
a(POP_ASM_T ante_tac THEN asm_rewrite_tac[]);
(* *** Goal "2" *** *)
a(MAP_EVERY simple_„_tac [»abs¼,»rep¼]);
a(asm_rewrite_tac[]);
pop_thm()
);
=TEX
=SML
val âabs_char_rep_char_defá = new_specification(["AbsChar","RepChar"],
	2, char_abs_rep_thm);
=TEX
=SML
val _ = declare_type_abbrev("STRING",[],»:CHAR LIST¼);
=TEX
=SML
end (* structure CharTheory *);
=TEX
=SML
open CharTheory;
=TEX
{\twocolumn[\section{INDEX OF DEFINED TERMS}]
{\makeatletter
\printindex}}
\end{document}

