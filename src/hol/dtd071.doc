%  $Id$ %Z%
=TEX
\documentstyle[hol1,11pt,TQ]{article}
\ftlinepenalty=9999
\makeindex
\TPPproject{FST Project}  %% Mandatory field
\TPPtitle{Detailed Design for the Theory of Relations}  %% Mandatory field
\def\TPPheadtitle{Detailed Design for the \cr
Theory of Sets}
\TPPref{DS/FMU/IED/DTD071}  %% Mandatory field
\def\SCCSversion{$Revision$ %
}
\TPPissue{\SCCSversion}  %% Mandatory field
\def\SCCSdate{\FormatDate{$Date$ %
}}
\TPPdate{\SCCSdate}  %% Mandatory field
\TPPstatus{Draft}			%% Mandatory field
\TPPtype{SML Literate Script}
\TPPkeywords{}
\TPPauthor{R.B.Jones & WIN01}  %% Mandatory field
%\TPPauthors{R.D. Arthan & WIN01\\K. Blackburn & WIN01}
\TPPauthorisation{R.D. Arthan & FST Team Leader}
\TPPabstract{This document gives a detailed design for the 
theory of relations.}
\TPPdistribution{\parbox[t]{4.0in}{%
	    Library
}}
%\TPPclass{CLASSIFICATION}
%\def\TPPheadlhs{}
%\def\TPPheadcentre{}
%def\TPPheadrhs{}
%\def\TPPfootlhs{}
%\def\TPPfootcentre{}
%\def\TPPfootrhs{}
\begin{document}
\makeTPPfrontpage
\vfill
\begin{centering}
\bf Copyright \copyright\ : International Computers Ltd 1992
\end{centering}
\pagebreak
\section{DOCUMENT CONTROL}
\subsection{Contents List}
\tableofcontents
\subsection{Document Cross References}
\bibliographystyle{fmu}
\bibliography{fmu}

\subsection{Changes History}
\begin{description}
\item[Issue \SCCSversion (\SCCSdate)]

This is the first draft of the document.

\end{description}
\subsection{Changes Forecast}

\section{GENERAL}
\subsection{Scope}
This document contains a detailed design
for the theory ``relation''.
The design is implemented in \cite{DS/FMU/IED/IMP071}.

\subsection{Introduction}
\subsubsection{Purpose and Background}
This document contains the detailed design for the theory ``relation''.

\subsubsection{Dependencies}
This document depends on \cite{DS/FMU/IED/IMP044}, and the theory design tools of \cite{DS/FMU/IED/DTD035}.
\subsubsection{Deficiencies}
None known.
\subsubsection{Possible Enhancements}
\section{THE THEORY ``relation''}
\subsection{Design of the theory ``relation''}
=THDOC
req_name "relation" (Value "hol");
=DESCRIBE
The theory ``Ûrelationİ'' contains the definitions of various operators upon sets of pairs and proves theorems relating to these for use in proof contexts.
=ENDDOC
=THDOC
req_alias(Û"first"İ,¬Fst®);
req_alias(Û"second"İ,¬Snd®);
req_type_abbrev(Û"ğ"İ, ["'a"], ¬:('a)SET®);
req_infix(500, "í");
req_alias(Û"í"İ,¬$,®);
req_infix(100, "ª");
req_type_abbrev(Û"ª"İ, ["'a","'b"], ¬:('a ¸ 'b)ğ®);
=DESCRIBE
The aliases ``first'' ``second'' $``í''$ and type abbreviations $``ğ''$ and $``ª''$ are included for compatibility with Z.
=ENDDOC
=THDOC
req_const(Û"¸"İ,¬:'a ğ ­ 'b ğ ­ ('a ª 'b)®);
req_defn(["¸"],
	([],¬µ (x : 'a ğ) (y : 'b ğ)· (x ¸ y) = {(v,w) | v  x ± w  y}®));
req_const(Û"ª"İ,¬:'a ğ ­ 'b ğ ­ ('a ª 'b) ğ®);
req_defn(["ª"],
	([],¬µ (x : 'a ğ) (y : 'b ğ)·
		(x ª y) = ğ(x ¸ y)®));
=DESCRIBE
The HOL constant $¸$ is the cartesian product contructor.
The HOL constant $Ûªİ$ is relation contructor.
=ENDDOC
=THDOC
req_const(Û"dom"İ,¬:('a ª 'b) ­ ('a)ğ®);
req_defn(["dom"], ([],¬µ (r : ('a ª 'b))· dom r = {x | ¶y · (x, y)  r}®));
req_const(Û"ran"İ,¬:('a ª 'b) ­ ('b)ğ®);
req_defn(["ran"],	([],¬µ (r : ('a ª 'b))· ran r = {y | ¶x · (x, y)  r}®));
=DESCRIBE
The HOL constant $dom$ is the function giving the domain of a relation.
The HOL constant $Ûranİ$ is the function giving the range of a relation.
=ENDDOC
=THDOC
req_const(Û"id"İ,¬:('a)ğ ­ ('a ª 'a)®);
req_defn(["id"], ([],¬µ (s : ('a)ğ)·  id s = {(x,x) | T}®));
=DESCRIBE
=ENDDOC
=THDOC
req_infix(500, "»");
req_const(Û"»"İ,¬:('a ­ 'b) ­ ('b ­ 'c) ­ ('a ­ 'c)®);
req_defn(["»"],([],¬T®));
req_infix(500, "r_»_r");
req_const(Û"r_»_r"İ,¬:('a ª 'b) ­ ('b ª 'c) ­ ('a ª 'c)®);
req_defn(["r_»_r"],([],¬T®));
(* req alias doesn't allow overloading
req_alias("»",¬$r_»_r®);
*)
req_infix(500, "f_»_r");
req_const(Û"f_»_r"İ,¬:('a ­ 'b) ­ ('b ª 'c) ­ ('a ª 'c)®);
req_defn(["f_»_r"],([],¬T®));
(* req alias doesn't allow overloading
req_alias("»",¬$f_»_r®);
*)
req_infix(500, "r_»_f");
req_const(Û"r_»_f"İ,¬:('a ª 'b) ­ ('b ­ 'c) ­ ('a ª 'c)®);
req_defn(["r_»_f"],([],¬T®));
(* req alias doesn't allow overloading
req_alias("»",¬$r_»_f®);
*)
=DESCRIBE
=ENDDOC
=THDOC
req_infix(500, "r_o_r");
req_const(Û"r_o_r"İ,¬:('a ª 'b) ­ ('b ª 'c) ­ ('a ª 'c)®);
req_defn(["r_o_r"],([],¬T®));
req_alias("o",¬$r_o_r®);
req_infix(500, "f_o_r");
req_const(Û"f_o_r"İ,¬:('a ­ 'b) ­ ('b ª 'c) ­ ('a ª 'c)®);
req_defn(["f_o_r"],([],¬T®));
(* req alias doesn't allow overloading
req_alias("o",¬$f_o_r®);
*)
req_infix(500, "r_o_f");
req_const(Û"r_o_f"İ,¬:('a ª 'b) ­ ('b ­ 'c) ­ ('a ª 'c)®);
req_defn(["r_o_f"],([],¬T®));
(* req alias doesn't allow overloading
req_alias("o",¬$r_o_f®);
*)
=DESCRIBE
=ENDDOC
=THDOC
req_infix(300,"ò");
req_const(Û"ò"İ,¬:('a)ğ ­ ('a ª 'b) ­ ('a ª 'b)®);
req_defn(["ò"],([],¬T®));
req_infix(300,"’");
req_const(Û"’"İ,¬:('a ª 'b) ­ ('b)ğ ­ ('a ª 'b)®);
req_defn(["’"],([],¬T®));
=DESCRIBE
=ENDDOC
=THDOC
req_infix(300,"á");
req_const(Û"á"İ,¬:('a)ğ ­ ('a ª 'b) ­ ('a ª 'b)®);
req_defn(["á"],([],¬T®));
req_infix(300,"");
req_const(Û""İ,¬:('a ª 'b) ­ ('b)ğ ­ ('a ª 'b)®);
req_defn([""],([],¬T®));
=DESCRIBE
=ENDDOC
=THDOC
req_const(Û"inverse_relation"İ,¬:('a ª 'b) ­ ('b ª 'a)®);
req_defn(["inverse_relation"],([],¬T®));
req_alias(Û"~"İ,¬inverse_relation®);
req_infix(300,"rim");
req_const(Û"rim"İ,¬:('a ª 'b) ­ ('a)ğ ­ ('b)ğ®);
req_defn(["rim"],([],¬T®));
=DESCRIBE
=ENDDOC
=THDOC
req_infix(300,"«");
req_const(Û"«"İ,¬:('a ª 'b) ­ ('a ª 'b) ­ ('a ª 'b)®);
req_defn(["«"],([],¬T®));
req_postfix(500,"›+");
req_const(Û"›+"İ,¬:('a ª 'a) ­ ('a ª 'a)®);
req_defn(["›+"],([],¬T®));
req_postfix(500, "›*");
req_const(Û"›*"İ,¬:('a ª 'a) ­ ('a ª 'a)®);
req_defn(["›*"],([],¬T®));
=DESCRIBE
The rest of the constants defined in \cite{Spivey89} section 4.2.
=ENDDOC
\subsection{Signature of the theory ``relation''}
=DOC
signature ÛRelationTheoryİ = sig
	val Û¸_defİ : THM;
	val Ûª_defİ : THM;
	val Ûdom_defİ : THM;
	val Ûran_defİ : THM;
	val Ûid_defİ : THM;
	val Û»_defİ : THM;
	val Ûr_»_r_defİ : THM;
	val Ûf_»_r_defİ : THM;
	val Ûr_»_f_defİ : THM;
	val Ûr_o_r_defİ : THM;
	val Ûf_o_r_defİ : THM;
	val Ûr_o_f_defİ : THM;
	val Ûò_defİ : THM;
	val Û’_defİ : THM;
	val Ûá_defİ : THM;
	val Û_defİ : THM;
	val Ûinverse_relation_defİ : THM;
	val Ûrim_defİ : THM;
	val Û«_defİ : THM;
	val Ûtc_defİ : THM;
	val Ûrtc_defİ : THM;
=DESCRIBE
This is the signature in which we declare theory ``relation''.
=ENDDOC
\section{PROOF CONTEXTS}
=DOC
(* proof context key "Ûrelation_extİ" *)
=DESCRIBE
$relation\_ext$ extends $sets_ext$ by:
\begin{description}
\item [Name]\ 

Becomes ``relation$\_$ext''.
\item [Stripping Goals and Theorems]\ 

Adding in ? applied at the top level or under a single negation.
\item [Rewriting Context]\ 

Adding in ?.
\end{description}
=ENDDOC
=DOC
(* proof context key Û"relation_alg"İ *)
=DESCRIBE
$relation\_alg$ extends $sets\_alg$ by:
\begin{description}
\item [Name]\ 

Becomes ``relation$\_$alg''.
\item [Stripping Goals and Theorems]\ 

Adding in ? applied at the top level or under a single negation.
\item [Rewriting Context]\ 

Adding in ?.
\end{description}
=ENDDOC
=SML
end;(* of signature SetsTheory *)
=TEX
\section{TEST POLICY}
Any functions given in this document should be tested according to the
general criteria set out in \cite{DS/FMU/IED/PLN008}, using the
tests in \cite{DS/FMU/IED/MDT071}.
In \cite{DS/FMU/IED/MDT071} the theory produced is checked by the theory design tools
of \cite{DS/FMU/IED/DTD035}, against the theory design provided.

The module tests should include automatic proof of all the ``rules'' in \cite{Spivey89} expressible in this part of the theory of relations.
\twocolumn[\section{INDEX}]
\small
\printindex
\end{document}


